# Dashboards {#sec-quarto-dash .unnumbered}

## Misc {#sec-quarto-dash-misc .unnumbered}

-   Packages
    -   [{]{style="color: #990000"}[summarywidget](https://kent37.github.io/summarywidget/){style="color: #990000"}[}]{style="color: #990000"} - Works with Crosstalk to display a single summary statistic. The statistic updates when the Crosstalk selection changes.
        -   A SummaryWidget can display the count, sum or mean of one column of selected data. It can also have a fixed filter that selects a subset of the full dataset.
    -   [{]{style="color: #990000"}[kpiwidget](https://arnold-kakas.github.io/kpiwidget/){style="color: #990000"}[}]{style="color: #990000"} - Works with crosstalk to display key performance indicators (KPIs) in Quarto dashboards. Extends [{summarywidget}]{style="color: #990000"}
        -   Offers “count”, “distinctCount”, “duplicates”, “sum”, “mean”, “min”, “max” as well as comparison modes (“ratio” and “share”) that let you compare groups within your data. 
-   Resources
    -   [Docs](https://quarto.org/docs/dashboards/)
-   Notes from Velasquez [talk](https://www.youtube.com/watch?v=Kq1hgg2NtE4&ab_channel=R-LadiesRome)
-   Both interactive JavaScript-based plots and standard raster based plots are supported.
-   Deployment Types
    -   Static: Rendered a single time (e.g.when underlying data won’t ever change)
        -   [Posit Connect Cloud](https://connect.posit.cloud/)
        -   [Quarto Pub](https://quarto.org/docs/publishing/quarto-pub.html)
        -   [Posit Connect](https://quarto.org/docs/publishing/rstudio-connect.html)
        -   [Confluence](https://quarto.org/docs/publishing/confluence.html)
    -   Scheduled: Rendered on a schedule (e.g. via cron job) to accommodate changing data.
    -   Parameterized: Variations of static or scheduled dashboards based on parameters.
    -   Interactive: Fully interactive dashboard using Shiny (requires a server for deployment).
        -   See [Shiny, Hosting](shiny-hosting.qmd#sec-shiny-hosting){style="color: green"}
-   Loading Shiny Server Modules
    -   Modules need loaded into a [context: setup]{.arg-text} chunk

    -   [Example]{.ribbon-highlight}: ([source](https://bsky.app/profile/rshean.bsky.social/post/3ljnvxrt2fs2s))

        ```` markdown
        ```{{r}}
        #| context: setup
        #| include: false

        # load all server functions from the R folder
        for (file in list.files("R", full.names = TRUE)) {
          source(file)
        }
        ```

        ```{{r}}
        #| context: server

        gpx <- gpx_upload_server("gpx_upload")
        # etc
        ```
        ````

## YAML {#sec-quarto-dash-yaml .unnumbered}

-   Basic

    ``` yaml
    ---
    title: "My first Quarto dashboard"
    format: dashboard
    ---
    ```

-   Logo and Nav-Buttons

    ``` yaml
    ---
    title: "My first Quarto dashboard"
    format: 
      dashboard:
        logo: images/car.png
        nav-buttons:
          - reddit
          - icon: gitlab
            href: https://gitlab.com/ivelasq
    ---
    ```

-   Add Shiny Interactivity

    ``` yaml
    ---
    title: "My first Quarto dashboard"
    format: 
      dashboard:
        orientation: rows
    server: shiny
    ---
    ```

-   Bootswatch Themes

    ``` yaml
    ---
    title: "My first Quarto dashboard"
    format: 
      dashboard:
        theme: united
    server: shiny
    ---
    ```

-   CSS and SCSS files

    ``` yaml
    ---
    title: "My first Quarto dashboard"
    format: 
      dashboard:
        theme: style.scss
    server: shiny
    ---
    ```

## Layouts {#sec-quarto-dash-lay .unnumbered}

-   Using the YAML: Rows or Columns\
    ![](_resources/Quarto-Documents.resources/dash-rows-1.png){.lightbox width="532"}

    ```` markdown
    ---
    title: "My first Quarto dashboard"
    format: 
      dashboard:
        orientation: rows
    ---

    ```{{r}}
    #| title: "Plot 1"
    plot(mtcars)
    ```

    ```{{r}}
    #| title: "Plot 2"
    plot(mtcars)
    ```
    ````

    -   [orientation: columns]{.arg-text} for columns format

-   Using Headings: Multiple Rows\
    ![](_resources/Quarto-Documents.resources/dash-rows-headings-1.png){.lightbox width="532"}

    ```` markdown
    ---
    title: "My first Quarto dashboard"
    format: dashboard
    ---

    ## Row

    Here is my dashboard:

    ## Row

    ```{{r}}
    #| title: "Plot 1"
    plot(mtcars)
    ```

    ```{{r}}
    #| title: "Plot 2"
    plot(mtcars$mpg)
    ```
    ````

-   Using Headings: Rows and Columns\
    ![](_resources/Quarto-Documents.resources/dash-rows-headings-2.png){.lightbox width="532"}

    ```` markdown
    ---
    title: "My first Quarto dashboard"
    format: dashboard
    ---

    ## Row

    Here is my dashboard:

    ## Row

    ### Column

    ```{{r}}
    #| title: "Plot 1"
    plot(mtcars)
    ```

    ```{{r}}
    #| title: "Plot 2"
    plot(mtcars)
    ```

    ### Column

    ```{{r}}
    #| title: "Plot 3"
    plot(mtcars)
    ```
    ````

    -   2 rows where the second row has 2 columns and the 1st column has 2 plots
    -   Sub-layouts determined by h2 and h3 headers

-   Tabsets

    ```` markdown
    ### Column {.tabset}

    ```{{r}}
    #| title: "Plot 1"
    plot(mtcars)
    ```

    ```{{r}}
    #| title: "Plot 2"
    plot(mtcars$mpg)
    ```
    ````

-   Pages\
    ![](_resources/Quarto-Documents.resources/dash-pages-1.gif){.lightbox width="532"}

    ```` markdown
    ---
    title: "My first Quarto dashboard"
    format: dashboard
    ---

    ## Row

    Here is my dashboard:

    # Page 1

    ```{{r}}
    #| title: "Plot 1"
    plot(mtcars)
    ```

    ```{{r}}
    #| title: "Plot 2"
    plot(mtcars$mpg)
    ```

    # Page 2

    ```{{r}}
    #| title: "Plot 3"
    plot(mtcars$hp)
    ```
    ````

    -   Pages syntax uses h1 headers
    -   h2 row specification at the top means that row is present in both pages

-   Text

    -   Only-Text

        ``` markdown
        ::: {.card}
        This text will be displayed within a card
        :::
        ```

    -   With Cell

        ```` markdown
        ::: {.card}
        ```{{r}}
        plot(mtcars)
        ```

        Above is my plot.
        :::
        ````

-   Value Boxes\
    ![](_resources/Quarto-Documents.resources/dash-value-boxes-1.png){.lightbox width="532"}

    ```` markdown
    ## Row

    ::: {.valuebox color="#F52A32"}
    Last updated:

    `{{r}} Sys.Date()`
    :::

    ```{{r}}
    #| content: valuebox
    #| title: "Spam per day"
    n <- mtcars |> tibble::as_tibble() |> dplyr::count() |> dplyr::pull(n)

    list(
      icon = "trash",
      color = "#F52A32",
      value = n
    )
    ```
    ````

## Inputs {#sec-quarto-dash-inputs .unnumbered}

-   Sidebar

    ``` markdown
    ## {.sidebar}

    Sidebar text here!
    ```

-   Add Shiny interactivity\
    ![](_resources/Quarto-Documents.resources/dash-input-shiny-1.gif){.lightbox width="532"}

    ```` yaml
    ```{{r}}
    #| context: setup
    library(ggplot2)
    ```

    ## {.sidebar}

    ```{{r}}
    selectInput(
        "variableChoice",
        "Choose a variable:",
        choices = names(mtcars)
      )
    ```

    ## Column

    ### Row

    Here is my dashboard:

    ### Row

    ```{{r}}
    #| title: "Plot 2"
    plotOutput("variablePlot")
    ```

    ```{{r}}
    #| context: server

    output$variablePlot <- renderPlot({
      yVar <- mtcars[[input$variableChoice]]
      plot(mtcars$index, yVar)
    })
    ```
    ```
    ````

    -   Need [server: shiny]{.arg-text} in the YAML (See YAML section)
