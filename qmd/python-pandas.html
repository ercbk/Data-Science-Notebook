<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Science - Pandas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../qmd/python-polars.html" rel="next">
<link href="../qmd/python-pandas-recipes.html" rel="prev">
<link href="../images/ds-favicon-32.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../qmd/python-classes.html">Python</a></li><li class="breadcrumb-item"><a href="../qmd/python-pandas.html">Pandas</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Data Science</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://ericbook.netlify.app/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-house-fill"></i></a>
    <a href="https://github.com/ercbk/Data-Science-Notebook" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Algorithms</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/algorithms-learn-to-rank.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learn-to-Rank</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/algorithms-marketing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Marketing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/algorithms-ml.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">ML</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/algorithms-product.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Algorithms, Product</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/algorithms-recommendation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Recommendation</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/anomaly-detection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anomaly Detection</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Apache</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/apache-arrow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Arrow</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/apache-spark.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spark</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/apis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">APIs</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Association</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/association-copulas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Copulas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/association-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/association-time-series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time Series</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/aws.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AWS</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/base-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Base R</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Bayes</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/bayes-priors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Priors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/bayes-reporting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reporting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/bayes-troubleshooting-hmc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Troubleshooting HMC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/bayes-workflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workflow</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/big-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Big Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/business-plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Business Plots</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/causal-inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Causal Inference</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Classification</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/cli.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CLI</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/cloud-services.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Cloud Services</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Clustering</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/clustering-time-series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time Series</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/clustering-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Code</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/code-debug.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Debugging</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/code-optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/code-snippets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Snippets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/code-style-guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Style Guide</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/code-testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Testing</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/confidence-and-prediction-intervals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Confidence &amp; Prediction Intervals</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/cross-validation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cross-Validation</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
 <span class="menu-text">CSS</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/css-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/css-recipes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Recipes</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/data.table.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">data.table</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">
 <span class="menu-text">Databases</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/db-dbt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">dbt</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/db-duckdb.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">DuckDB</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/db-engineering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Engineering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/db-feature-stores.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">DB, Feature Stores</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/db-lakes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lakes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/db-normalization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Normalization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/db-other.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Other</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/db-postgres.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PostgreSQL</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/db-relational.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Relational</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/db-vector.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vector Databases</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/db-warehouses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Warehouses</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/decision-intelligence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Decision Intelligence</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">
 <span class="menu-text">Diagnostics</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/diagnostics-bayes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bayes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/diagnostics-classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Classification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/diagnostics-clustering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Clustering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/diagnostics-cv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CV</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/diagnostics-dl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">DL</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/diagnostics-forecasting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Forecasting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/diagnostics-glm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GLM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/diagnostics-mixed-effects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mixed Effects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/diagnostics-model-agnostic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model Agnostic</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/diagnostics-nlp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NLP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/diagnostics-probabilistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Probabilistic</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/diagnostics-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regression</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/distributions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Distributions</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false">
 <span class="menu-text">Deep Learning</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/dl-audio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">DL, Audio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/dl-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">General</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/dl-graph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">DL, Graph</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/dl-image.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Image</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/dl-tabular.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Tabular</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/dl-training.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">DL, Training</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false">
 <span class="menu-text">Docker</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/docker-aws.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AWS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/docker-fundamentals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Docker, Fundamentals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/docker-misc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Docker, Misc</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false">
 <span class="menu-text">Econometrics</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/econometrics-discrete-choice-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Discrete Choice Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/econometrics-fixed-effects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Fixed Effects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/econometrics-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/econometrics-mixed-effects-frequentist.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mixed Effects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/econometrics-psa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Propensity Score Analysis</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false">
 <span class="menu-text">EDA</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/eda-geospatial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">EDA, Geospatial</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/eda-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/eda-multilevel-longitudinal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multilevel, Longitudinal</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/eda-text.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Text</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/eda-time-series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time Series</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" aria-expanded="false">
 <span class="menu-text">Experiments</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/experiments-a_b-testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">A/B Testing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/experiments-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/experiments-designs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Designs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/experiments-planning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Planning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/experiments-rct.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">RCT</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/experiments-stepped-wedge-cluster-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Experiments, Stepped Wedge Cluster Design</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/extreme-value-theory-(evt).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Extreme Value Theory</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" aria-expanded="false">
 <span class="menu-text">Feature Engineering</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-15" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/feature-engineering-embeddings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Embeddings</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/feature-engineering-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/feature-engineering-geospatial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Geospatial</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/feature-engineering-time-series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time Series</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/feature-engineering-splines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Splines</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/feature-engineering-tokenization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tokenization</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/feature-reduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Feature Reduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/feature-selection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Feature Selection</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" aria-expanded="false">
 <span class="menu-text">Forecasting</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-16" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/forecasting-decomposition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Decomposition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/forecasting-dl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Deep Learning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/forecasting-ensembling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ensembling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/forecasting-hierarchical_grouped.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hierarchical/Grouped</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/forecasting-ml.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ML</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/forecasting-multivariate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multivariate</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/forecasting-nonlinear.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Nonlinear</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/forecasting-statistical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/generalized-additive-models-(gam).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Generalized Additive Models</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-17" aria-expanded="false">
 <span class="menu-text">Geospatial</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-17" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-17" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/geospatial-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/geospatial-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/geospatial-remote-sensing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Remote Sensing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/geospatial-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Processing</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-18" aria-expanded="false">
 <span class="menu-text">Git</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-18" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-18" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/git-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">General</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/git-github-actions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Github Actions</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/glossary-ds-terms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossary: DS terms</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/gnu-make.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GNU Make</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-19" aria-expanded="false">
 <span class="menu-text">Google</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-19" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-19" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/google-analytics-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Google, Analytics, Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/google-analytics-reports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Google, Analytics, Reports</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/google-bigquery.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">BigQuery</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/gtable-package.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">gtable package</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HTML</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/information-theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Information Theory</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/inkscape.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inkscape</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-20" aria-expanded="false">
 <span class="menu-text">Job</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-20" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-20" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/job-management-leadership.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Job, Management / Leadership</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/job-on-the-job.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">On the job</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/job-organizational-and-team-development.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Organizational and Team Development</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/job-reports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reports</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/job-search.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Search</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/js.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JS</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/json.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JSON</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/kubernetes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Kubernetes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/latex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LaTeX</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/loss-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Loss Functions</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-21" aria-expanded="false">
 <span class="menu-text">Mathematics</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-21" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-21" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/mathematics-linear-algebra.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linear Algebra</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/mathematics-glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossary</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/mathematics-notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Notation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/mathematics-probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Probability</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/mathematics-statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/misc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Misc</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/missingness.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Missingness</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/mlops.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MLOps</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-22" aria-expanded="false">
 <span class="menu-text">Model Building</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-22" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-22" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/model-building-brms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">brms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/model-building-concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concepts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/model-building-ensembling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ensembling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/model-building-h2o-automl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">H2O AutoML</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/model-building-modeltime.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">modeltime</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/model-building-rstanarm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">rstanarm</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/model-building-sklearn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">sklearn</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/model-building-tidymodels.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">tidymodels</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-23" aria-expanded="false">
 <span class="menu-text">Networks</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-23" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-23" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/networks-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/networks-knowledge-graphs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Knowledge Graphs</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-24" aria-expanded="false">
 <span class="menu-text">NLP</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-24" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-24" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/nlp-fine-tuning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Fine Tuning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/nlp-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/nlp-llms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">NLP, LLMs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/nlp-prompt-engineering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prompt Engineering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/nlp-sentiment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentiment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/nlp-summarization-extraction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Summarization and Extraction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/nlp-topic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/nlp-transformers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Transformers</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/optimization-equation-systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optimization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/outliers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Outliers</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/package-development.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Package Development</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-25" aria-expanded="false">
 <span class="menu-text">Post-Hoc Analysis</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-25" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-25" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/post-hoc-analysis-ab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">A/B</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/post-hoc-analysis-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/post-hoc-analysis-emmeans.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">emmeans</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/post-hoc-analysis-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/post-hoc-analysis-multilevel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multilevel</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/privacy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Privacy</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-26" aria-expanded="false">
 <span class="menu-text">Production</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-26" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-26" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/production-data-validation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Validation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/production-deployment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Deployment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/production-development.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Development</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/production-ml-monitoring.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">ML Monitoring</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/production-testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Testing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/production-tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Tools</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-27" aria-expanded="false">
 <span class="menu-text">Projects</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-27" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-27" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/project-analyses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analyses</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/project-development.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Development</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/project-management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Management</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/project-planning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Planning</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-28" aria-expanded="true">
 <span class="menu-text">Python</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-28" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-28" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/python-classes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Classes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/python-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/python-jupyter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Jupyter</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/python-misc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Misc</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/python-numpy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numpy</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/python-pandas-recipes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pandas, Recipes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/python-pandas.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Pandas</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/python-polars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Polars</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/python-reticulate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">reticulate</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/python-snippets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Snippets</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/quarto-rmarkdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quarto</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regex</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-29" aria-expanded="false">
 <span class="menu-text">Regression</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-29" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-29" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/regression-discrete.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Discrete</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/regression-interactions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interactions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/regression-linear.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linear</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/regression-logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Logistic</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/regression-multinomial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multinomial</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/regression-ordinal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Ordinal</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/regression-other.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Other</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/regression-quantile.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quantile</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/regression-regularized.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regularized</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/regression-survival.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Survival</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/renv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Renv</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/scraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Scraping</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-30" aria-expanded="false">
 <span class="menu-text">Shiny</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-30" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-30" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/shiny-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">General</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/shiny-hosting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hosting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/shiny-modules.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Shiny, Modules</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/shiny-production.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Shiny, Production</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/shiny-python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/shiny-ui.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Shiny, UI</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/shiny-ui-examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Shiny, UI Examples</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/simulation-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simulation, Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/spreadsheets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spreadsheets</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/sql.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SQL</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/stochastic-processes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">Stochastic Processes</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-31" aria-expanded="false">
 <span class="menu-text">Surveys</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-31" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-31" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/surveys-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/surveys-census-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">51</span>&nbsp; <span class="chapter-title">Surveys, Census Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/surveys-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">52</span>&nbsp; <span class="chapter-title">Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/surveys-sampling-methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sampling Methods</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/teaching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Teaching</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/tidyeval.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">53</span>&nbsp; <span class="chapter-title">Tidyeval</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/tuning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tuning</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-32" aria-expanded="false">
 <span class="menu-text">Visualization</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-32" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-32" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/visualization-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/visualization-diagrams.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Diagrams</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/vs-code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">VS Code</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-33" aria-expanded="false">
 <span class="menu-text">Web</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-33" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-33" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/web-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Web Design</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/web-servers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Server</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-py-pandas-misc" id="toc-sec-py-pandas-misc" class="nav-link active" data-scroll-target="#sec-py-pandas-misc">Misc</a></li>
  <li><a href="#sec-py-pandas-series" id="toc-sec-py-pandas-series" class="nav-link" data-scroll-target="#sec-py-pandas-series">Series</a></li>
  <li><a href="#sec-py-pandas-cats" id="toc-sec-py-pandas-cats" class="nav-link" data-scroll-target="#sec-py-pandas-cats">Categoricals</a></li>
  <li><a href="#sec-py-pandas-ops" id="toc-sec-py-pandas-ops" class="nav-link" data-scroll-target="#sec-py-pandas-ops">Operations</a>
  <ul>
  <li><a href="#sec-py-pandas-ops-read" id="toc-sec-py-pandas-ops-read" class="nav-link" data-scroll-target="#sec-py-pandas-ops-read">Read</a></li>
  <li><a href="#sec-py-pandas-ops-write" id="toc-sec-py-pandas-ops-write" class="nav-link" data-scroll-target="#sec-py-pandas-ops-write">Write</a></li>
  <li><a href="#sec-py-pandas-ops-create" id="toc-sec-py-pandas-ops-create" class="nav-link" data-scroll-target="#sec-py-pandas-ops-create">Create/Copy</a></li>
  <li><a href="#sec-py-pandas-ops-index" id="toc-sec-py-pandas-ops-index" class="nav-link" data-scroll-target="#sec-py-pandas-ops-index">Indexes</a></li>
  <li><a href="#sec-py-pandas-ops-select" id="toc-sec-py-pandas-ops-select" class="nav-link" data-scroll-target="#sec-py-pandas-ops-select">Select</a></li>
  <li><a href="#sec-py-pandas-ops-rename" id="toc-sec-py-pandas-ops-rename" class="nav-link" data-scroll-target="#sec-py-pandas-ops-rename">Rename columns</a></li>
  <li><a href="#sec-py-pandas-ops-del" id="toc-sec-py-pandas-ops-del" class="nav-link" data-scroll-target="#sec-py-pandas-ops-del">Delete columns</a></li>
  <li><a href="#sec-py-pandas-ops-filter" id="toc-sec-py-pandas-ops-filter" class="nav-link" data-scroll-target="#sec-py-pandas-ops-filter">Filtering</a></li>
  <li><a href="#sec-py-pandas-ops-mutate" id="toc-sec-py-pandas-ops-mutate" class="nav-link" data-scroll-target="#sec-py-pandas-ops-mutate">Mutate</a></li>
  <li><a href="#sec-py-pandas-ops-pivot" id="toc-sec-py-pandas-ops-pivot" class="nav-link" data-scroll-target="#sec-py-pandas-ops-pivot">Pivot</a></li>
  <li><a href="#sec-py-pandas-ops-bindrows" id="toc-sec-py-pandas-ops-bindrows" class="nav-link" data-scroll-target="#sec-py-pandas-ops-bindrows">Bind_Rows</a></li>
  <li><a href="#sec-py-pandas-ops-bindcols" id="toc-sec-py-pandas-ops-bindcols" class="nav-link" data-scroll-target="#sec-py-pandas-ops-bindcols">Bind_Cols</a></li>
  <li><a href="#count" id="toc-count" class="nav-link" data-scroll-target="#count">Count</a></li>
  <li><a href="#sec-py-pandas-ops-arrange" id="toc-sec-py-pandas-ops-arrange" class="nav-link" data-scroll-target="#sec-py-pandas-ops-arrange">Arrange</a></li>
  <li><a href="#sec-py-pandas-ops-groupby" id="toc-sec-py-pandas-ops-groupby" class="nav-link" data-scroll-target="#sec-py-pandas-ops-groupby">Group_By</a></li>
  <li><a href="#sec-py-pandas-ops-summ" id="toc-sec-py-pandas-ops-summ" class="nav-link" data-scroll-target="#sec-py-pandas-ops-summ">Summarize</a></li>
  <li><a href="#sec-py-pandas-ops-join" id="toc-sec-py-pandas-ops-join" class="nav-link" data-scroll-target="#sec-py-pandas-ops-join">Join</a></li>
  <li><a href="#sec-py-pandas-ops-distinct" id="toc-sec-py-pandas-ops-distinct" class="nav-link" data-scroll-target="#sec-py-pandas-ops-distinct">Distinct</a></li>
  <li><a href="#sec-py-pandas-ops-replace" id="toc-sec-py-pandas-ops-replace" class="nav-link" data-scroll-target="#sec-py-pandas-ops-replace">Replace values</a></li>
  <li><a href="#sec-py-pandas-ops-strings" id="toc-sec-py-pandas-ops-strings" class="nav-link" data-scroll-target="#sec-py-pandas-ops-strings">Strings</a></li>
  <li><a href="#sec-py-pandas-ops-conv" id="toc-sec-py-pandas-ops-conv" class="nav-link" data-scroll-target="#sec-py-pandas-ops-conv">Conversions</a></li>
  <li><a href="#sec-py-pandas-ops-sampsim" id="toc-sec-py-pandas-ops-sampsim" class="nav-link" data-scroll-target="#sec-py-pandas-ops-sampsim">Sample and Simulate</a></li>
  <li><a href="#sec-py-pandas-ops-chain" id="toc-sec-py-pandas-ops-chain" class="nav-link" data-scroll-target="#sec-py-pandas-ops-chain">Chaining</a></li>
  <li><a href="#sec-py-pandas-ops-xtab" id="toc-sec-py-pandas-ops-xtab" class="nav-link" data-scroll-target="#sec-py-pandas-ops-xtab">Crosstab</a></li>
  <li><a href="#sec-py-pandas-ops-pvttbl" id="toc-sec-py-pandas-ops-pvttbl" class="nav-link" data-scroll-target="#sec-py-pandas-ops-pvttbl">Pivot Table</a></li>
  <li><a href="#sec-py-pandas-ops-iter" id="toc-sec-py-pandas-ops-iter" class="nav-link" data-scroll-target="#sec-py-pandas-ops-iter">Iteration</a></li>
  </ul></li>
  <li><a href="#sec-py-pandas-ts" id="toc-sec-py-pandas-ts" class="nav-link" data-scroll-target="#sec-py-pandas-ts">Time Series</a>
  <ul>
  <li><a href="#misc" id="toc-misc" class="nav-link" data-scroll-target="#misc">Misc</a></li>
  <li><a href="#sec-py-pandas-ts-ops" id="toc-sec-py-pandas-ts-ops" class="nav-link" data-scroll-target="#sec-py-pandas-ts-ops">Operations</a></li>
  <li><a href="#sec-py-pandas-ts-calcs" id="toc-sec-py-pandas-ts-calcs" class="nav-link" data-scroll-target="#sec-py-pandas-ts-calcs">Calculations</a></li>
  <li><a href="#sec-py-pandas-ts-sim" id="toc-sec-py-pandas-ts-sim" class="nav-link" data-scroll-target="#sec-py-pandas-ts-sim">Simulation</a></li>
  </ul></li>
  <li><a href="#sec-py-pandas-opt" id="toc-sec-py-pandas-opt" class="nav-link" data-scroll-target="#sec-py-pandas-opt">Optimization</a>
  <ul>
  <li><a href="#sec-py-pandas-opt-perf" id="toc-sec-py-pandas-opt-perf" class="nav-link" data-scroll-target="#sec-py-pandas-opt-perf">Performance</a></li>
  <li><a href="#sec-py-pandas-opt-mem" id="toc-sec-py-pandas-opt-mem" class="nav-link" data-scroll-target="#sec-py-pandas-opt-mem">Memory Optimization</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../qmd/python-classes.html">Python</a></li><li class="breadcrumb-item"><a href="../qmd/python-pandas.html">Pandas</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-py-pandas" class="quarto-section-identifier">Pandas</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="sec-py-pandas-misc" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-py-pandas-misc">Misc</h2>
<ul>
<li>Examples of using numeric indexes to subset dfs
<ul>
<li>indexes &gt;&gt; Syntax for using indexes</li>
<li>select</li>
<li>filtering &gt;&gt; .loc/.iloc</li>
</ul></li>
<li><code>df.head(8)</code> to see the first 8 rows</li>
<li><code>df.info()</code> is like <code>str</code> in R</li>
<li><code>df.describe()</code> is like <code>summary</code> in R
<ul>
<li><code>include='all'</code> to include string columns</li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-series" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-py-pandas-series">Series</h2>
<ul>
<li><p>a vector with an index (ordered data object)</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> pd.Series([<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">12</span>],</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; index<span class="op">=</span>[<span class="st">'London'</span>, <span class="st">'New York'</span>, <span class="st">'Helsinki'</span>])</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> s</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>London&nbsp; &nbsp; &nbsp; <span class="dv">20</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>New York&nbsp; &nbsp; <span class="dv">21</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>Helsinki&nbsp; &nbsp; <span class="dv">12</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>dtype: int64</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Misc</p>
<ul>
<li>Two Pandas Series with the same elements in a different order are not the same object</li>
<li>List vs Series: list can only use numeric indexes, while the Pandas Series also allows textual indexes.</li>
</ul></li>
<li><p>Args</p>
<ul>
<li>data: Different data structures can be used, such as a list, a dictionary, or even a single value.</li>
<li>index: A labeled index for the elements in the series can be defined.
<ul>
<li>If not set, the elements will be numbered automatically, starting at zero.</li>
</ul></li>
<li>dtype: Sets the data types of the series
<ul>
<li>Useful if all data in the series are of the same data type</li>
</ul></li>
<li>name: Series can be named.
<ul>
<li>Useful if the Series is to be part of a DataFrame. Then the name is the corresponding column name in the DataFrame.</li>
</ul></li>
<li>copy: True or False; specifies whether the passed data should be saved as a copy or not</li>
</ul></li>
<li><p>Subset: <code>series_1["A"]</code> or <code>series_1[0]</code></p></li>
<li><p>Find the index of a value: <code>list(series_1).index(&lt;value&gt;)</code></p></li>
<li><p>Change value of an index: <code>series_1["A"] = 1</code> (1 is now the value for index, A)</p></li>
<li><p>Add a value to a series: <code>series_1["D"] = "fourth_element"</code> (D is the next index in the sequence)</p></li>
<li><p>Filter by condition(s): <code>series_1[series_1 &gt; 4]</code> or <code>series_1[series_1 &gt; 4][series_1 != 8]</code></p></li>
<li><p>dict to Series: <code>pd.Series(dict_1)</code></p></li>
<li><p>Series to df: <code>pd.DataFrame([series_1, series_2, series_3])</code></p>
<ul>
<li>Series objects should either all have the same index or no index. Otherwise, a separate column will be created for each different index, for which the other rows have no value</li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-cats" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-py-pandas-cats">Categoricals</h2>
<ul>
<li><p>Misc - Also see - Conversions for converting between types - Optimizations &gt;&gt; Memory Optimizations &gt;&gt; Variable Type</p></li>
<li><p>Categorical (<a href="https://pandas.pydata.org/docs/user_guide/categorical.htm">docs</a>)</p>
<ul>
<li><p>python version of factors in R</p>
<ul>
<li>Rs levels are always of type string, while categories in pandas can be of any dtype.</li>
<li>R allows for missing values to be included in its levels (pandas categories). pandas does not allow NaN categories, but missing values can still be in the values.
<ul>
<li>See <code>cat.codes</code> below</li>
</ul></li>
</ul></li>
<li><p>Create a categorical series: <code>s = pd.Series(["a", "b", "c", "a"], dtype="category")</code></p></li>
<li><p>Create df of categoricals</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">"A"</span>: <span class="bu">list</span>(<span class="st">"abca"</span>), <span class="st">"B"</span>: <span class="bu">list</span>(<span class="st">"bccd"</span>){style<span class="op">=</span><span class="st">'color: #990000'</span>}[}]{style<span class="op">=</span><span class="st">'color: #990000'</span>}, dtype<span class="op">=</span><span class="st">"category"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"A"</span>]</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>&nbsp; &nbsp; a</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>&nbsp; &nbsp; b</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>&nbsp; &nbsp; c</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>&nbsp; &nbsp; a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul></li>
<li><p>Specify categories and add to dataframe (also see Set Categories below)</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>raw_cat <span class="op">=</span> pd.Categorical(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; [<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"a"</span>], categories<span class="op">=</span>[<span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>], ordered<span class="op">=</span><span class="va">False</span>   </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"B"</span>] <span class="op">=</span> raw_cat</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>df&nbsp;</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>&nbsp; A&nbsp; &nbsp; B</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>&nbsp; a&nbsp; NaN</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>&nbsp; b&nbsp; &nbsp; b</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>&nbsp; c&nbsp; &nbsp; c</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>&nbsp; a&nbsp; NaN</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Note that categories not in the specification get NaNs</li>
</ul></li>
<li><p>See categories, check if ordered: <code>cat.categories</code>, <code>cat.ordered</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>s.cat.categories</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>Out[<span class="dv">61</span>]: Index([<span class="st">'c'</span>, <span class="st">'b'</span>, <span class="st">'a'</span>], dtype<span class="op">=</span><span class="st">'object'</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>s.cat.ordered</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>Out[<span class="dv">62</span>]: <span class="va">False</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Set categories for a categorical: <code>s = s.cat.set_categories(["one", "two", "three", "four"])</code></p></li>
<li><p>Rename categories w/<code>cat.rename_categories</code></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># with a list of new categories</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>new_categories <span class="op">=</span> [<span class="st">"Group </span><span class="sc">%s</span><span class="st">"</span> <span class="op">%</span> g <span class="cf">for</span> g <span class="kw">in</span> s.cat.categories]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> s.cat.rename_categories(new_categories)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># with a dict</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> s.cat.rename_categories({<span class="dv">1</span>: <span class="st">"x"</span>, <span class="dv">2</span>: <span class="st">"y"</span>, <span class="dv">3</span>: <span class="st">"z"</span>})</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>s</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>&nbsp; &nbsp; Group a</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>&nbsp; &nbsp; Group b</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>&nbsp; &nbsp; Group c</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>&nbsp; &nbsp; Group a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Add a category (doesnt have to be a string, e.g.&nbsp;4): <code>s = s.cat.add_categories([4])</code></p></li>
<li><p>Remove categories</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> s.cat.remove_categories([<span class="dv">4</span>])</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>s.cat.remove_unused_categories()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Ordered</p>
<ul>
<li><p>Create ordered categoricals</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.api.types <span class="im">import</span> CategoricalDtype</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> pd.Series([<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"a"</span>])</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>cat_type <span class="op">=</span> CategoricalDtype(categories<span class="op">=</span>[<span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>], ordered<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>s_cat <span class="op">=</span> s.astype(cat_type)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>s_cat&nbsp;</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>&nbsp; &nbsp; NaN</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>&nbsp; &nbsp; &nbsp; b</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>&nbsp; &nbsp; &nbsp; c</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>&nbsp; &nbsp; NaN</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>dtype: category</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>Categories (<span class="dv">3</span>, <span class="bu">object</span>): [<span class="st">'b'</span> <span class="op">&lt;</span> <span class="st">'c'</span> <span class="op">&lt;</span> <span class="st">'d'</span>]</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"># alt</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> pd.Series([<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"a"</span>]).astype(CategoricalDtype(ordered<span class="op">=</span><span class="va">True</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Reorder: <code>cat.reorder_categories</code></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> pd.Series([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>], dtype<span class="op">=</span><span class="st">"category"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> s.cat.reorder_categories([<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>], ordered<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>s</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>&nbsp; &nbsp; <span class="dv">1</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>&nbsp; &nbsp; <span class="dv">2</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>&nbsp; &nbsp; <span class="dv">3</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>&nbsp; &nbsp; <span class="dv">1</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>dtype: category</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>Categories (<span class="dv">3</span>, int64): [<span class="dv">2</span> <span class="op">&lt;</span> <span class="dv">3</span> <span class="op">&lt;</span> <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul></li>
<li><p>Category codes: <code>.cat.codes</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> pd.Series([<span class="st">"a"</span>, <span class="st">"b"</span>, np.nan, <span class="st">"a"</span>], dtype<span class="op">=</span><span class="st">"category"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>s</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>&nbsp; &nbsp; &nbsp; a</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>&nbsp; &nbsp; &nbsp; b</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>&nbsp; &nbsp; NaN</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>&nbsp; &nbsp; &nbsp; a</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>dtype: category</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>Categories (<span class="dv">2</span>, <span class="bu">object</span>): [<span class="st">'a'</span>, <span class="st">'b'</span>]</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>s.cat.codes</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>&nbsp; &nbsp; <span class="dv">0</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>&nbsp; &nbsp; <span class="dv">1</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>&nbsp; <span class="op">-</span><span class="dv">1</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>&nbsp; &nbsp; <span class="dv">0</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>dtype: int8</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="sec-py-pandas-ops" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops">Operations</h2>
<section id="sec-py-pandas-ops-read" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-read">Read</h3>
<ul>
<li><p>Misc</p>
<ul>
<li>For large datasets, better to use data.table::fread (see <a href="Python, Misc">Python, Misc</a> &gt;&gt; Misc)</li>
</ul></li>
<li><p>CSV <code>df = pd.read_csv('wb_data.csv', header=0)</code></p>
<ul>
<li>usecols=[col1, col8] for only reading certain columns</li>
</ul></li>
<li><p>Read and process data in chunks</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> chunk <span class="kw">in</span> pd.read_csv(<span class="st">"dummy_dataset.csv"</span>, chunksize<span class="op">=</span><span class="dv">50000</span>):&nbsp;</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="bu">print</span>(<span class="bu">type</span>(chunk)) <span class="co"># process data</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="kw">class</span> <span class="st">'pandas.core.frame.DataFrame'</span><span class="op">&gt;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="kw">class</span> <span class="st">'pandas.core.frame.DataFrame'</span><span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Issue: Cannot perform operations that need the entire DataFrame. For instance, say you want to perform a <code>groupby()</code> operation on a column. Here, it is possible that rows corresponding to a group may lie in different chunks.</li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-write" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-write">Write</h3>
<ul>
<li>CSV: <code>df.to_csv("file.csv", sep = "|", index = False)</code>
<ul>
<li>sep - column delimiter (assume comma is default)</li>
<li>index=False -&nbsp; instructs Pandas to NOT write the index of the DataFrame in the CSV file</li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-create" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-create">Create/Copy</h3>
<ul>
<li>Dataframes
<ul>
<li><p>Syntaxes</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="st">"first_name"</span>: [<span class="st">"John"</span>,<span class="st">"jane"</span>,<span class="st">"emily"</span>,<span class="st">"Matt"</span>,<span class="st">"Alex"</span>],</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="st">"last_name"</span>: [<span class="st">"Doe"</span>,<span class="st">"doe"</span>,<span class="st">"uth"</span>,<span class="st">"Dan"</span>,<span class="st">"mir"</span>],</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="st">"group"</span>: [<span class="st">"A-12"</span>,<span class="st">"B-15"</span>,<span class="st">"A-18"</span>,<span class="st">"A-12"</span>,<span class="st">"C-15"</span>],</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="st">"salary"</span>: [<span class="st">"$75000"</span>,<span class="st">"$72000"</span>,<span class="st">"45000"</span>,<span class="st">"$77000"</span>,<span class="st">"58,000"</span>]</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; [</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; (<span class="dv">1</span>, <span class="st">'A'</span>, <span class="fl">10.5</span>, <span class="va">True</span>),</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; (<span class="dv">2</span>, <span class="st">'B'</span>, <span class="fl">10.0</span>, <span class="va">False</span>),</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; (<span class="dv">3</span>, <span class="st">'A'</span>, <span class="fl">19.2</span>, <span class="va">False</span>)&nbsp; &nbsp; &nbsp; &nbsp;</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; ],</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; columns<span class="op">=</span>[<span class="st">'colA'</span>, <span class="st">'colB'</span>, <span class="st">'colC'</span>, <span class="st">'colD'</span>]</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.DataFrame([[<span class="st">"A"</span>, <span class="dv">1</span>], [<span class="st">"A"</span>, <span class="dv">2</span>], [<span class="st">"B"</span>, <span class="dv">1</span>],&nbsp;</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [<span class="st">"C"</span>, <span class="dv">4</span>], [<span class="st">"A"</span>, <span class="dv">10</span>], [<span class="st">"B"</span>, <span class="dv">7</span>]],&nbsp;</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; columns <span class="op">=</span> [<span class="st">"col1"</span>, <span class="st">"col2"</span>])</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame([(<span class="st">'bird'</span>, <span class="fl">389.0</span>),</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<span class="st">'bird'</span>, <span class="fl">24.0</span>),</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<span class="st">'mammal'</span>, <span class="fl">80.5</span>),</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<span class="st">'mammal'</span>, np.nan)],</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; index<span class="op">=</span>[<span class="st">'falcon'</span>, <span class="st">'parrot'</span>, <span class="st">'lion'</span>, <span class="st">'monkey'</span>],</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; columns<span class="op">=</span>(<span class="st">'class'</span>, <span class="st">'max_speed'</span>))</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; class&nbsp; max_speed</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>falcon&nbsp; &nbsp; bird&nbsp; &nbsp; &nbsp; <span class="fl">389.0</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>parrot&nbsp; &nbsp; bird&nbsp; &nbsp; &nbsp; <span class="fl">24.0</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>lion&nbsp; &nbsp; mammal&nbsp; &nbsp; &nbsp; <span class="fl">80.5</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>monkey&nbsp; mammal&nbsp; &nbsp; &nbsp; &nbsp; NaN</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Create a copy of a df: <code>df2 = df1.copy()</code></p></li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-index" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-index">Indexes</h3>
<ul>
<li><p>Misc</p>
<ul>
<li>Row labels</li>
<li>DataFrame indexes do NOT have to be unique</li>
<li>The time it takes to search a dataframe is shorter with unique index</li>
<li>By default, the index is a numeric row index</li>
</ul></li>
<li><p>Set</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.set_index(<span class="st">'col1'</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df.set_index(column, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>previous index is discarded</li>
<li>inplace=True says modify orginal df</li>
</ul></li>
<li><p>Change indexes but keep previous index</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df.reset_index() <span class="co"># converts index to a column, index now the default numeric</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.set_index(<span class="st">'col2'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><code>reset_index</code></li>
<li>inplace=True says modify orginal df (default = False)</li>
<li>drop=True discards old index</li>
</ul></li>
<li><p>Change to new indices or expand indices: <code>df.reindex</code></p></li>
<li><p>See indexes: <code>df.index.names</code></p></li>
<li><p>Sort: <code>df.sort_index(ascending=False)</code></p></li>
<li><p>Syntax for using indexes</p>
<ul>
<li>Misc
<ul>
<li>:&nbsp; is not mandatory as a placeholder for the column position</li>
</ul></li>
<li><code>.loc</code>
<ul>
<li><code>df.loc[one_row_label] # Series</code></li>
<li><code>df.loc[list_of_row_labels] # DataFrame</code></li>
<li><code>df.loc[:, one_column_label] # Series</code></li>
<li><code>df.loc[:, list_of_column_labels] # DataFrame</code></li>
<li><code>df.loc[first_row:last_row]</code></li>
</ul></li>
<li><code>.iloc</code>
<ul>
<li><code>df.iloc[one_row_position, :] # Series</code></li>
<li><code>df.iloc[list_of_row_positions, :] # DataFrame</code></li>
</ul></li>
</ul></li>
<li><p><span class="ribbon-highlight">Example</span>: <code>df.iloc[0:3]</code> or <code>df.iloc[:3]</code></p>
<ul>
<li>outputs rows 0, 1, 2&nbsp; (end point NOT included)</li>
</ul></li>
<li><p><span class="ribbon-highlight">Example</span>: <code>df.iloc[75:]</code></p>
<ul>
<li>(e.g.&nbsp;78 rows) outputs rows 75, 76, 77 (end point, i.e., last row, NOT included)</li>
</ul></li>
<li><p><span class="ribbon-highlight">Example</span>: <code>df.loc['The Fool' : 'The High Priestess']</code></p>
<ul>
<li>outputs all rows from The Fool to The High Priestess (end point included)</li>
</ul></li>
<li><p><span class="ribbon-highlight">Example</span>: Filtering cells</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>df.loc[</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; [<span class="st">'King of Wands'</span>, <span class="st">'The Fool'</span>, <span class="st">'The Devil'</span>],</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; [<span class="st">'image'</span>, <span class="st">'upright keywords'</span>]</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>index values: King of Wands, etc.</li>
<li>column names: image, etc.</li>
</ul></li>
<li><p>Multi-indexes</p>
<ul>
<li><p>Use list of variables to create multi-index: <code>df.set_index(['family', 'vowel_inventories'], inplace=True)</code><br>
<img src="./_resources/Python,_Pandas.resources/image.8.png" class="img-fluid"></p>
<ul>
<li>family is the 0th index; vowel_inventories is the 1st index</li>
</ul></li>
<li><p>See individual index values: <code>df.index.get_level_values(0)</code></p>
<ul>
<li>Gets the 0th index values (e.g.&nbsp;family)</li>
</ul></li>
<li><p>Sort by specific level: <code>df.sort_index(level=1)</code></p>
<ul>
<li>Not specifying a level means df will be sorted first by level 0, then level 1, etc.</li>
</ul></li>
<li><p>Replace index values: <code>df.rename(index={"Arawakan" : "Maipurean", "old_value" : "new_value"})</code></p>
<ul>
<li>Replaces instances in all levels of the multi-index</li>
<li>For only a specific level, use levels=level_name</li>
</ul></li>
<li><p>Subsetting via multi-index</p>
<ul>
<li>Basic<br>
<img src="./_resources/Python,_Pandas.resources/image.7.png" class="img-fluid"></li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>row_label <span class="op">=</span> (<span class="st">'Indo-European'</span>, <span class="st">'2 Average (5-6)'</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>df.loc[row_label, :].tail(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Note: Using : or specifying columns may be necessary using a multi-index</p></li>
<li><p>With multiple multi-index values</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>row_labels <span class="op">=</span> [</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; (<span class="st">'Arawakan'</span>, <span class="st">'2 Average (5-6)'</span>),</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; (<span class="st">'Uralic'</span>, <span class="st">'2 Average (5-6)'</span>),</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>row_labels <span class="op">=</span> ([<span class="st">'Arawakan'</span>, <span class="st">'Uralic'</span>], <span class="st">'2 Average (5-6)'</span>) <span class="co"># alternate method</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>df.loc[row_labels, :]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>With only 1 level of the multi-index</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>row_labels <span class="op">=</span> pd.IndexSlice[:, <span class="st">'1 Small (2-4)'</span>]</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>df.loc[row_labels, :]</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># drops other level of the multi-index</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>df.loc[<span class="st">'1 Small (2-4)'</span>]</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># more verbose</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>df.xs(<span class="st">'1 Small (2-4)'</span>, level <span class="op">=</span> <span class="st">'vowel_inventories'</span>, drop_level<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Ignores level 0 of the multi-index and filters only by level 1</li>
<li>Could also use an alias, e.g.&nbsp;<code>idx = pd.IndexSlice</code> if writing the whole thing gets annoying</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-select" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-select">Select</h3>
<ul>
<li><p>Also see <a href="../qmd/python-pandas.html#sec-py-pandas-ops-index" style="color: green">Indexes</a></p></li>
<li><p>Select by name:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"name"</span>,<span class="st">"note"</span>]]</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>df.<span class="bu">filter</span>([<span class="st">"Type"</span>, <span class="st">"Price"</span>])</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>dat.loc[:, [<span class="st">"f1"</span>, <span class="st">"f2"</span>, <span class="st">"f3"</span>]]</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>target_columns <span class="op">=</span> df.columns.<span class="bu">str</span>.contains(<span class="st">'\+'</span>) <span class="co"># boolean array: Trues, Falses</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> df.iloc[:, <span class="op">~</span>target_columns]</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>Y <span class="op">=</span> df.iloc[:, target_columns]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>: is a place holder in this case</li>
</ul></li>
<li><p>Subset</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>ts_df</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; t<span class="op">-</span><span class="dv">3</span>&nbsp; t<span class="op">-</span><span class="dv">2</span>&nbsp; t<span class="op">-</span><span class="dv">1</span>&nbsp; t<span class="op">-</span><span class="dv">0</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>&nbsp; <span class="fl">10.0</span>&nbsp; <span class="fl">11.0</span>&nbsp; <span class="fl">12.0</span>&nbsp; <span class="fl">13.0</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span>&nbsp; <span class="fl">11.0</span>&nbsp; <span class="fl">12.0</span>&nbsp; <span class="fl">13.0</span>&nbsp; <span class="fl">14.0</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>&nbsp; <span class="fl">12.0</span>&nbsp; <span class="fl">13.0</span>&nbsp; <span class="fl">14.0</span>&nbsp; <span class="fl">15.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>All but last column</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>ts_df.iloc[:, :<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; t<span class="op">-</span><span class="dv">3</span>&nbsp; t<span class="op">-</span><span class="dv">2</span>&nbsp; t<span class="op">-</span><span class="dv">1</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>&nbsp; <span class="fl">10.0</span>&nbsp; <span class="fl">11.0</span>&nbsp; <span class="fl">12.0</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span>&nbsp; <span class="fl">11.0</span>&nbsp; <span class="fl">12.0</span>&nbsp; <span class="fl">13.0</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>&nbsp; <span class="fl">12.0</span>&nbsp; <span class="fl">13.0</span>&nbsp; <span class="fl">14.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>For <code>[:, :-2]</code>, the last 2 columns would not be included&nbsp;</li>
</ul></li>
<li><p>All but first column</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>ts_df.iloc[:, <span class="dv">1</span>:]</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; t<span class="op">-</span><span class="dv">2</span>&nbsp; t<span class="op">-</span><span class="dv">1</span>&nbsp; t<span class="op">-</span><span class="dv">0</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>&nbsp; <span class="fl">11.0</span>&nbsp; <span class="fl">12.0</span>&nbsp; <span class="fl">13.0</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span>&nbsp; <span class="fl">12.0</span>&nbsp; <span class="fl">13.0</span>&nbsp; <span class="fl">14.0</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>&nbsp; <span class="fl">13.0</span>&nbsp; <span class="fl">14.0</span>&nbsp; <span class="fl">15.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>i.e.&nbsp;the 0th indexed column is not included</li>
<li>For <code>[:, 2:]</code>, the 0th and 1st indexed column would not be included</li>
</ul></li>
<li><p>All columns between the 2nd col and 4th col</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>ts_df.iloc[:, <span class="dv">1</span>:<span class="dv">4</span>]</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; t<span class="op">-</span><span class="dv">2</span>&nbsp; t<span class="op">-</span><span class="dv">1</span>&nbsp; t<span class="op">-</span><span class="dv">0</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>&nbsp; <span class="fl">11.0</span>&nbsp; <span class="fl">12.0</span>&nbsp; <span class="fl">13.0</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span>&nbsp; <span class="fl">12.0</span>&nbsp; <span class="fl">13.0</span>&nbsp; <span class="fl">14.0</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>&nbsp; <span class="fl">13.0</span>&nbsp; <span class="fl">14.0</span>&nbsp; <span class="fl">15.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>left endpoint (1st index) is included but the right endpoint (4th index) is not</li>
<li>i.e.&nbsp;the 1st, 2nd, and 3rd indexed columns are included</li>
</ul></li>
<li><p>All columns except the first 2 cols and the last col</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>ts_df.iloc[:, <span class="dv">2</span>:<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; t<span class="op">-</span><span class="dv">1</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>&nbsp; <span class="fl">12.0</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span>&nbsp; <span class="fl">13.0</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>&nbsp; <span class="fl">14.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>i.e.&nbsp;0th and 1st indexed columns not included and -1 says dont include the last column</li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-rename" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-rename">Rename columns</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df.rename({<span class="st">'variable'</span>: <span class="st">'Year'</span>, <span class="st">'value'</span>: <span class="st">'GDP'</span>}, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>-   "variable" is renamed to "Year" and "value" is renamed to "GDP"</code></pre>
</section>
<section id="sec-py-pandas-ops-del" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-del">Delete columns</h3>
<ul>
<li><code>df.drop(columns = ["col1"])</code></li>
</ul>
</section>
<section id="sec-py-pandas-ops-filter" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-filter">Filtering</h3>
<ul>
<li><p>Also see <a href="../qmd/python-pandas.html#sec-py-pandas-ops-index" style="color: green">Indexes</a></p></li>
<li><p>On value: <code>df_filtered = data[data.col1 == "A"]</code></p></li>
<li><p>Via query: <code>df_filtered = data.query("col1 == 'A'")</code></p></li>
<li><p>On multiple values: <code>df_filtered = data[(data.col1 == "A") | (data.col1 == "B")]</code></p></li>
<li><p>By pattern: <code>df[df.profession.str.contains("engineer")]</code></p>
<ul>
<li>Only rows of profession variable with values containing engineer</li>
<li>Also available
<ul>
<li><code>str.startswith</code>: <code>df_filtered = data[data.col1.str.startswith("Jo")]</code></li>
<li><code>str.endswith</code>: <code>df_filtered = data[data.col1.str.endswith("n")]</code></li>
</ul></li>
<li>If column has NAs or NaNs, specify arg, nan=False to ignore them, else youll get a valueError</li>
<li>Methods are case-sensitive unless you specify, case=False:</li>
</ul></li>
<li><p>By negated pattern: <code>df[~df.profession.str.contains("engineer")]</code></p></li>
<li><p>By character type: <code>df_filtered = data[data.col1.str.isnumeric()]</code></p>
<ul>
<li>Also available
<ul>
<li>upper-case: isupper()</li>
<li>lower-case: islower()</li>
<li>alphabetic: isalpha()</li>
<li>digits: isdigit()</li>
<li>decimal: isdecimal()</li>
<li>whitespace: isspace()</li>
<li>titlecase: istitle()</li>
<li>alphanumeric: isalnum()</li>
</ul></li>
</ul></li>
<li><p>By month of a datetime variable: <code>df[df.date_of_birth.dt.month==11]</code></p>
<ul>
<li>datetime variable has yy-mm-dd format; <code>dt.month</code> accessor used to filter rows of date_of_birth variable wit</li>
</ul></li>
<li><p>Conditional: <code>df[df.note &gt; 90]</code></p>
<ul>
<li>By string length: <code>df_filtered = data[data.col1.str.len() &gt; 4]</code></li>
</ul></li>
<li><p>Multi-conditional</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>df[(df.date_of_birth.dt.year <span class="op">&gt;</span> <span class="dv">2000</span>) <span class="op">&amp;</span>&nbsp;</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>&nbsp; (df.profession.<span class="bu">str</span>.contains(<span class="st">"engineer"</span>))]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>df.query(<span class="st">"Distance &lt; 2 &amp; Rooms &gt; 2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>%in%: <code>df[df.group.isin(["A","C"])]</code></p></li>
<li><p>Smallest 2 values of note column: <code>df.nsmallest(2, "note")</code></p>
<ul>
<li><code>nlargest</code> also available</li>
</ul></li>
<li><p>Only rows in a column with NA values: <code>df[df.profession.isna()]</code></p></li>
<li><p>Only rows in a column that arent NA: <code>df[df.profession.notna()]</code></p></li>
<li><p>Find rows by index value: <code>df.loc['Tony']</code></p>
<ul>
<li><p><code>loc</code> is for the value, <code>iloc</code> is for position (numerical or logical)</p>
<ul>
<li>See <a href="../qmd/python-pandas.html#sec-py-pandas-ops-select" style="color: green">Select</a> columns Example for iloc logical case</li>
</ul></li>
<li><p>With groupby</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>data_grp <span class="op">=</span> data.groupby(<span class="st">"Company Name"</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>data_grp.get_group(<span class="st">"Amazon"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul></li>
<li><p>Return 1st 3 rows (and 2 columns): <code>df.loc[:3, ["name","note"]]</code></p></li>
<li><p>Return 1st 3 rows and 3rd column: <code>df.iloc[:3, 2]</code></p>
<ul>
<li>h 11th month</li>
</ul></li>
<li><p>Using index to filter single cell or groups of cells</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>df.loc[</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; [<span class="st">'King of Wands'</span>, <span class="st">'The Fool'</span>, <span class="st">'The Devil'</span>],</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; [<span class="st">'image'</span>, <span class="st">'upright keywords'</span>]</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>index values: King of Wands, etc. (aka row names)</li>
<li>column names: image, etc.</li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-mutate" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-mutate">Mutate</h3>
<ul>
<li><p>Looks like all these functions do the same damn thing</p></li>
<li><p><code>assign</code> e.g.&nbsp;Add columns</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"col3"</span>] <span class="op">=</span> df[<span class="st">"col1"</span>] <span class="op">+</span> df[<span class="st">"col2"</span>]</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.assign(col3 <span class="op">=</span> df[<span class="st">"col1"</span>] <span class="op">+</span> df[<span class="st">"col2"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><code>apply</code>&nbsp; a function to column(s)</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">'colA'</span>, <span class="st">'colB'</span>]] <span class="op">=</span> df[[<span class="st">'colA'</span>, <span class="st">'colB'</span>]].<span class="bu">apply</span>(np.sqrt)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"col3"</span>] <span class="op">=</span> df.<span class="bu">apply</span>(my_func, axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>docs: <a href="https://pandas.pydata.org/docs/reference/api/pandas.Series.apply.html">Series</a>, <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.apply.html">DataFrame</a></li>
<li>axis - arg for applying a function across rowwise or columnwise (default is 0, which is for columnwise)</li>
<li>The fact that mutated columns are assigned to the columns of the df are what keeps it from being like summarize
<ul>
<li>If np.sum were the function, then the output would be two numbers and this probably wouldnt work.</li>
</ul></li>
</ul></li>
<li><p><code>map</code></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'colE'</span>] <span class="op">=</span> df[<span class="st">'colE'</span>].<span class="bu">map</span>({<span class="st">'Hello'</span>: <span class="st">'Good Bye'</span>, <span class="st">'Hey'</span>: <span class="st">'Bye'</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Each case of Hello is changed to Good By, etc.</li>
<li>If you give it a dict, it acts like a case_when or plyr::mapvalues or maybe recode</li>
<li>Values in the column but arent included in the dict get NaNs</li>
<li>This also can take a lambda function</li>
<li><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.map.html">Docs</a> (only applies to Series, so I guess that means only 1 column at a time(?))</li>
</ul></li>
<li><p><code>applymap</code></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">'colA'</span>, <span class="st">'colD'</span>]] <span class="op">=</span> df[[<span class="st">'colA'</span>, <span class="st">'colD'</span>]].applymap(<span class="kw">lambda</span> x: x<span class="op">**</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.applymap.html">Docs</a></li>
<li>Says it applies a function elementwise, so its probably performing a loop
<ul>
<li>Therefore better to avoid if a vectorized version of the function is available</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-pivot" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-pivot">Pivot</h3>
<ul>
<li><p>pivot_longer</p>
<ul>
<li><p><span class="ribbon-highlight">Example</span></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>year_list<span class="op">=</span><span class="bu">list</span>(df.iloc[:, <span class="dv">4</span>:].columns)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.melt(df, id_vars<span class="op">=</span>[<span class="st">'Country Name'</span>,<span class="st">'Series Name'</span>,<span class="st">'Series Code'</span>,<span class="st">'Country Code'</span>], value_vars<span class="op">=</span>year_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>year_list has the variable names of the columns you want to merge into 1 column</li>
</ul></li>
</ul></li>
<li><p>pivot_wider</p>
<ul>
<li><p><span class="ribbon-highlight">Example</span></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: add a count column to able to summarize when grouping</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>long_df[<span class="st">'count'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: group by date and type and sum</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>grouped_long_df <span class="op">=</span> long_df.groupby([<span class="st">'date'</span>, <span class="st">'type'</span>]).<span class="bu">sum</span>().reset_index()</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: build wide format from long format</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>wide_df <span class="op">=</span> grouped_long_df.pivot(index<span class="op">=</span><span class="st">'date'</span>, columns<span class="op">=</span><span class="st">'type'</span>, values<span class="op">=</span><span class="st">'count'</span>).reset_index()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>long_df has two columns: type and date</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-bindrows" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-bindrows">Bind_Rows</h3>
<div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.DataFrame({<span class="st">'strata'</span>: <span class="dv">1</span>, <span class="st">'y'</span>: np.random.normal(loc<span class="op">=</span><span class="dv">10</span>, scale<span class="op">=</span><span class="dv">1</span>, size<span class="op">=</span>size){style<span class="op">=</span><span class="st">'color: #990000'</span>}[}]{style<span class="op">=</span><span class="st">'color: #990000'</span>})</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.DataFrame({<span class="st">'strata'</span>: <span class="dv">2</span>, <span class="st">'y'</span>: np.random.normal(loc<span class="op">=</span><span class="dv">15</span>, scale<span class="op">=</span><span class="dv">2</span>, size<span class="op">=</span>size){style<span class="op">=</span><span class="st">'color: #990000'</span>}[}]{style<span class="op">=</span><span class="st">'color: #990000'</span>})</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> pd.DataFrame({<span class="st">'strata'</span>: <span class="dv">3</span>, <span class="st">'y'</span>: np.random.normal(loc<span class="op">=</span><span class="dv">20</span>, scale<span class="op">=</span><span class="dv">3</span>, size<span class="op">=</span>size){style<span class="op">=</span><span class="st">'color: #990000'</span>}[}]{style<span class="op">=</span><span class="st">'color: #990000'</span>})</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>df4 <span class="op">=</span> pd.DataFrame({<span class="st">'strata'</span>: <span class="dv">4</span>, <span class="st">'y'</span>: np.random.normal(loc<span class="op">=</span><span class="dv">25</span>, scale<span class="op">=</span><span class="dv">4</span>, size<span class="op">=</span>size){style<span class="op">=</span><span class="st">'color: #990000'</span>}[}]{style<span class="op">=</span><span class="st">'color: #990000'</span>})</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.concat([df1, df2, df3, df4])</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>df_ls <span class="op">=</span> [df1, df2, df3, df4]</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>df_all <span class="op">=</span> pd.concat([df_ls[i] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">8</span>)], axis<span class="op">=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>2 variables are created, strata and y, then merged into a df</li>
<li>Make sure no rows are duplicates</li>
</ul>
<div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>df_loans <span class="op">=</span> pd.concat([df, df_pdf], verify_integrity<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="sec-py-pandas-ops-bindcols" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-bindcols">Bind_Cols</h3>
<div class="sourceCode" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>pd.concat([top_df, more_df], axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="count" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="count">Count</h3>
<ul>
<li><p>value.counts: <code>df["col_name"].value_counts()</code></p>
<ul>
<li>output arranged in descending order of frequencies</li>
<li>faster than groupby + size</li>
<li>args
<ul>
<li>normalize=False</li>
<li>dropna=True</li>
</ul></li>
</ul></li>
<li><p>groupby + count</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">"Product_Category"</span>).size()</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">"Product_Category"</span>).count()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>size includes null values</li>
<li>count doesnt include null values</li>
<li>arranged by the index column</li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-arrange" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-arrange">Arrange</h3>
<ul>
<li><code>df.sort_values(by = "col_name")</code>
<ul>
<li>args
<ul>
<li>ascending=True</li>
<li>ignore_index=False (True will reset the index)</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-groupby" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-groupby">Group_By</h3>
<ul>
<li><p>Find number of groups</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>df_group <span class="op">=</span> df.groupby(<span class="st">"Product_Category"</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>df_group.ngroups</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>groupby + count</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">"Product_Category"</span>).size()</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">"Product_Category"</span>).count()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>size includes null values</li>
<li>count doesnt include null values</li>
</ul></li>
<li><p>Only groupby observed categories</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">"col1"</span>, observed<span class="op">=</span><span class="va">True</span>)[<span class="st">"col2"</span>].<span class="bu">sum</span>()</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>col1</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>A&nbsp; &nbsp; <span class="dv">49</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>B&nbsp; &nbsp; <span class="dv">43</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>Name: col2, dtype: int64</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>col1 is a category type and has 3 levels specified (A, B, C) but the column only has As and Bs</li>
<li>observed=False (default) would include C and a count of 0.</li>
</ul></li>
<li><p>Count NAs</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"col1"</span>] <span class="op">=</span> df[<span class="st">"col1"</span>].astype(<span class="st">"string"</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">"col1"</span>, dropna<span class="op">=</span><span class="va">False</span>)[<span class="st">"col2"</span>].<span class="bu">sum</span>()</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co"># output</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>col1</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>A&nbsp; &nbsp; &nbsp; <span class="fl">49.0</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>B&nbsp; &nbsp; &nbsp; <span class="fl">43.0</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>NA<span class="op">&gt;</span>&nbsp; &nbsp; <span class="fl">30.0</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>Name: col2, dtype: float64</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>** Will not work with categorical types **
<ul>
<li>So categorical variables, you must convert to strings to be able to group and count NAs</li>
</ul></li>
</ul></li>
<li><p>Combo</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">"col3"</span>).agg({<span class="st">"col1"</span>:<span class="bu">sum</span>, <span class="st">"col2"</span>:<span class="bu">max</span>})</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; col1&nbsp; col2</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>col3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>A&nbsp; &nbsp; &nbsp; &nbsp; <span class="dv">1</span>&nbsp; &nbsp; <span class="dv">2</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>B&nbsp; &nbsp; &nbsp; &nbsp; <span class="dv">8</span>&nbsp; &nbsp; <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Aggregate with only 1 function</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">"Product_Category"</span>)[[<span class="st">"UnitPrice(USD)"</span>,<span class="st">"Quantity"</span>]].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>See summarize for aggregate by more than 1 function</li>
</ul></li>
<li><p>Extract a group category</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>df_group <span class="op">=</span> df.groupby(<span class="st">"Product_Category"</span>)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>df_group.get_group(<span class="st">'Healthcare'</span>)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>df[df[<span class="st">"Product_Category"</span>]<span class="op">==</span><span class="st">'Home'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Group objects are iterable</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>df_group <span class="op">=</span> df.groupby(<span class="st">"Product_Category"</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> name_of_group, contents_of_group <span class="kw">in</span> df_group:</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="bu">print</span>(name_of_group)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="bu">print</span>(contents_of_group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Get summary stats on each category conditional on a column</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">"Product_Category"</span>)[[<span class="st">"Quantity"</span>]].describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="sec-py-pandas-ops-summ" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-summ">Summarize</h3>
<ul>
<li><p>With groupby and agg</p>
<ul>
<li><code>df.groupby("cat_col_name").agg(new_col_name = ("num_col_name", "func_name"))</code>
<ul>
<li>To reset the index&nbsp; (i.e.&nbsp;ungroup)
<ul>
<li>use <code>.groupby</code> arg, as_index=False</li>
<li>use <code>.reset_index()</code> at the end of the chain
<ul>
<li>arg: drop=TRUE does something (maybe drops grouping columns)</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li><p>Group aggregate with more than 1 function</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">"Product_Category"</span>)[[<span class="st">"Quantity"</span>]].agg([<span class="bu">min</span>,<span class="bu">max</span>,<span class="bu">sum</span>,<span class="st">'mean'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>when you mention mean (with quotes), .aggregate() searches for a function mean belonging to pd.Series i.e.&nbsp;pd.Series.mean().</li>
<li>Whereas, if you mention mean (without quotes), .aggregate() will search for function named mean in default Python, which is unavailable and will throw an NameError exception.</li>
</ul></li>
<li><p>Use a different aggregate function on specific columns</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>function_dictionary <span class="op">=</span> {<span class="st">'OrderID'</span>:<span class="st">'count'</span>,<span class="st">'Quantity'</span>:<span class="st">'mean'</span>}</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">"Product_Category"</span>).aggregate(function_dictionary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="sec-py-pandas-ops-join" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-join">Join</h3>
<ul>
<li><p>Using merge: <code>pd.merge(df1,df2)</code></p>
<ul>
<li>More versatile than <code>join</code></li>
<li>Automatically detects a common column</li>
<li>Method: how = inner (i.e.&nbsp;default is inner join)
<ul>
<li>outer , left , right are available</li>
</ul></li>
<li>On columns with different names
<ul>
<li>on = col_a</li>
<li>left_on = left df col name</li>
<li>right_on = right df col name</li>
</ul></li>
<li>copy = True (default)</li>
</ul></li>
<li><p>Using join</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>df1.set_index(<span class="st">'Course'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>df2.set_index(<span class="st">'Course'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> df1.join(df2, on <span class="op">=</span> <span class="st">'Course'</span>, how <span class="op">=</span> <span class="st">'left'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>instance method that joins on the indexes of the dataframes</li>
<li>The column that we match on for the left dataframe doesnt have to be its index. But for the right dataframe, the join key must be its index</li>
<li>Can use multiple columns as the index by passing a list, e.g.&nbsp;[Course, Student_ID]</li>
<li>* indexes do NOT have to be unique *</li>
<li>Faster than merge</li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-distinct" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-distinct">Distinct</h3>
<ul>
<li>Find number of unique values: <code>data.Country.nunique()</code></li>
<li>Display unique values: <code>df["col3"].unique()</code></li>
<li>Create a boolean column to indicated duplicated rows: <code>df.duplicated(keep=False)</code></li>
<li>Check for duplicate ids: <code>df_loans[df_loans.duplicated(keep=False)].sort_index()</code></li>
<li>Count duplicated ids: <code>df_check.index.duplicated().sum()</code></li>
<li>Drop duplicated rows: <code>df.drop_duplicates()</code></li>
</ul>
</section>
<section id="sec-py-pandas-ops-replace" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-replace">Replace values</h3>
<ul>
<li><p>In the whole df</p>
<ul>
<li><p>1 value</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>df.replace(to_replace <span class="op">=</span> <span class="st">'?'</span>, value <span class="op">=</span> np.nan, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>replaces all values == ? with NaN</li>
<li>faster than loc method</li>
</ul></li>
<li><p>Multiple values</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>df.replace([<span class="st">"Male"</span>, <span class="st">"Female"</span>], [<span class="st">"M"</span>, <span class="st">"F"</span>], inplace<span class="op">=</span><span class="va">True</span>) <span class="co"># list</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>df.replace({<span class="st">"United States"</span>: <span class="st">"USA"</span>, <span class="st">"US"</span>: <span class="st">"USA"</span>}, inplace<span class="op">=</span><span class="va">True</span>) <span class="co"># dict</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul></li>
<li><p>Only in specific columns</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>df.replace(</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; {</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; <span class="st">"education"</span>: {<span class="st">"HS-grad"</span>: <span class="st">"High school"</span>, <span class="st">"Some-college"</span>: <span class="st">"College"</span>},</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; <span class="st">"income"</span>: {<span class="st">"&lt;=50K"</span>: <span class="dv">0</span>, <span class="st">"&gt;50K"</span>: <span class="dv">1</span>},</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; },</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; inplace<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>replacement only occurs in education and income columns</li>
</ul></li>
<li><p>Using Indexes</p>
<ul>
<li><p><span class="ribbon-highlight">Example</span> (2 rows, 1 col): <code>df.loc[['Four of Pentacles', 'Five of Pentacles'], 'suit'] = 'Pentacles'</code></p>
<ul>
<li>index values: Four of Pentacles, Five of Pentacles</li>
<li>column name: suit</li>
<li>Replaces the values in those cells with the value Pentacles</li>
</ul></li>
<li><p><span class="ribbon-highlight">Example</span> (1 row, 2 cols):</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>df.loc[<span class="st">'King of Wands'</span>, [<span class="st">'suit'</span>, <span class="st">'reversed_keywords'</span>]] <span class="op">=</span> [</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="st">'Wands'</span>, <span class="st">'impulsiveness, haste, ruthlessness'</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>index value: King of Wands</li>
<li>column names: suit, :reversed_keywords</li>
<li>In suit, replaces value with Wands</li>
<li>In reversed words, replaces value with impulsiveness, haste, ruthlessness</li>
</ul></li>
</ul></li>
<li><p>Replace Na/NaNs in a column with a constant value</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'col_name'</span>].fillna(value <span class="op">=</span> <span class="fl">0.85</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Replaces Na/NaNs in a column with the value of a function/method</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'price'</span>].fillna(value <span class="op">=</span> df.price.median(), inplace <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Replaces Na/NaNs in a column with a group value (e.g.&nbsp;group by fruit, then use price median)</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># median</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'price'</span>].fillna(df.groupby(<span class="st">'fruit'</span>)[<span class="st">'price'</span>].transform(<span class="st">'median'</span>), inplace <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Forward-Fill</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'price'</span>].fillna(method <span class="op">=</span> <span class="st">'ffill'</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'price'</span>] <span class="op">=</span> df.groupby(<span class="st">'fruit'</span>)[<span class="st">'price'</span>].ffill(limit <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'price'</span>] <span class="op">=</span> df.groupby(<span class="st">'fruit'</span>)[<span class="st">'price'</span>].ffill()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>forward-fill: fills Na/NaN with previous non-Na/non-NaN value</li>
<li>forward-fill, limited to 1: only fills with the previous value if theres a non-Na/non-NaN 1 spot behind it.
<ul>
<li>May leave NAs/NaNs</li>
</ul></li>
<li>forward-fill by group</li>
</ul></li>
<li><p>Backward-Fill</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'price'</span>].fillna(method <span class="op">=</span> <span class="st">'bfill'</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>backward-fill: fills Na/NaN with next non-Na/non-NaN value</li>
</ul></li>
<li><p>Alternating between backward-fill and forward-fill</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'price'</span>] <span class="op">=</span> df.groupby(<span class="st">'fruit'</span>)[<span class="st">'price'</span>].ffill().bfill()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>alternating methods: for the 1st group a forward fill is performed; for the next group, a backward fill is performed; etc.</li>
</ul></li>
<li><p>Interpolation<br>
<img src="./_resources/Python,_Pandas.resources/0-Hol8k9kfX-I-spVi.png" class="img-fluid"></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'price'</span>].interpolate(method <span class="op">=</span> <span class="st">'linear'</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'price'</span>] <span class="op">=</span> df.groupby(<span class="st">'fruit'</span>)[<span class="st">'price'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.interpolate(method<span class="op">=</span><span class="st">'linear'</span>)) <span class="co"># by group</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'price'</span>] <span class="op">=</span> df.groupby(<span class="st">'fruit'</span>)[<span class="st">'price'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.interpolate(method<span class="op">=</span><span class="st">'linear'</span>)).bfill() <span class="co"># by group with backwards-fill</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Interpolation (e.g.&nbsp;linear)
<ul>
<li>May leave NAs/NaNs</li>
</ul></li>
<li>Interpolation by group</li>
<li>Interpolation + backwards-fill</li>
</ul></li>
<li><p>Apply a conditional: says fill na with mean_price where weekday column is TRUE; if FALSE, fill with mean_price*1.25</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>mean_price <span class="op">=</span> df.groupby(<span class="st">'fruit'</span>)[<span class="st">'price'</span>].transform(<span class="st">'mean'</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'price'</span>].fillna((mean_price).where(cond <span class="op">=</span> df.weekday, other <span class="op">=</span> mean_price<span class="op">*</span><span class="fl">1.25</span>), inplace <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="sec-py-pandas-ops-strings" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-strings">Strings</h3>
<ul>
<li><p>Misc</p>
<ul>
<li>regex is slow</li>
<li>Stored as object type but StringDtype is available. This new Dtype is optional for now but it may be required to do so in the future</li>
<li>Regex with <a href="https://t.co/wid3sFKLpE">Examples in python and pandas</a></li>
</ul></li>
<li><p>Filter (see <a href="../qmd/python-pandas.html#sec-py-pandas-ops-filter" style="color: green">Filter</a> section)</p></li>
<li><p>Replace pattern using regex</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'colB'</span>] <span class="op">=</span> df[<span class="st">'colB'</span>].<span class="bu">str</span>.replace(<span class="vs">r'\D'</span>, <span class="st">''</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'colB'</span>] <span class="op">=</span> df[<span class="st">'colB'</span>].replace(<span class="vs">r'\D'</span>, <span class="vs">r''</span>, regex<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>r indicates youre using regex</li>
<li>replaces all non-numeric patterns (e.g.&nbsp;letters, symbols) with an empty string</li>
<li>Replace pattern with list comprehension (more efficient than loops)</li>
</ul></li>
<li><p>With {{re}}</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'colB'</span>] <span class="op">=</span> [re.sub(<span class="st">'[^0-9]'</span>, <span class="st">''</span>, x) <span class="cf">for</span> x <span class="kw">in</span> df[<span class="st">'colB'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>re is the regular expressions library</li>
<li>Replaces everything <em>not</em> a number with empty string (carrot inside is a negation)</li>
</ul></li>
<li><p>Split w/list output</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> df[<span class="st">"group"</span>].<span class="bu">str</span>.split(<span class="st">"-"</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>&nbsp; &nbsp; [A, <span class="dv">1</span><span class="er">B</span>]</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>&nbsp; &nbsp; [B, <span class="dv">1</span><span class="er">B</span>]</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>&nbsp; &nbsp; [A, <span class="dv">1</span><span class="er">C</span>]</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>&nbsp; &nbsp; [A, <span class="dv">1</span><span class="er">B</span>]</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>&nbsp; &nbsp; [C, <span class="dv">1</span><span class="er">C</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>- is the delimiter. A-1B &gt; [A, 1B]</li>
</ul></li>
<li><p>Split into separate columns</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"group1"</span>] <span class="op">=</span> df[<span class="st">"group"</span>].<span class="bu">str</span>.split(<span class="st">"-"</span>, expand<span class="op">=</span><span class="va">True</span>)[<span class="dv">0</span>]</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"group2"</span>] <span class="op">=</span> df[<span class="st">"group"</span>].<span class="bu">str</span>.split(<span class="st">"-"</span>, expand<span class="op">=</span><span class="va">True</span>)[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>expand = True splits into separate columns</li>
<li>BUT you have to manually create the new columns in the old df by assigning each column to a new column name in the old df.</li>
</ul></li>
<li><p>Concatenate strings from a list</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>words <span class="op">=</span> [<span class="st">'word'</span>] <span class="op">*</span> <span class="dv">100000</span> <span class="co"># ['word', 'word', ...]</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>sentence <span class="op">=</span> <span class="st">""</span>.join(words)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>More efficient than + operator</li>
</ul></li>
<li><p>Concatenate string columns</p>
<ul>
<li><p>List comprehension is fastest</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'all'</span>] <span class="op">=</span> [p1 <span class="op">+</span> <span class="st">' '</span> <span class="op">+</span> p2 <span class="op">+</span> <span class="st">' '</span> <span class="op">+</span> p3 <span class="op">+</span> <span class="st">' '</span> <span class="op">+</span> p4 <span class="cf">for</span> p1, p2, p3, p4 <span class="kw">in</span> <span class="bu">zip</span>(df[<span class="st">'a'</span>], df[<span class="st">'b'</span>], df[<span class="st">'c'</span>], df[<span class="st">'d'</span>])]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>+ operator with a space,  , as the delimiter</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'all'</span>] <span class="op">=</span> df[<span class="st">'a'</span>] <span class="op">+</span> <span class="st">' '</span> <span class="op">+</span> df[<span class="st">'b'</span>] <span class="op">+</span> <span class="st">' '</span> <span class="op">+</span> df[<span class="st">'c'</span>] <span class="op">+</span> <span class="st">' '</span> <span class="op">+</span> df[<span class="st">'d'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Also fast and have read that this is most efficient for larger datasets</li>
</ul></li>
<li><p><code>df['colE'] = df.colB.str.cat(df.colD)</code> can be used for relatively small datasets (up to 100150 rows)</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>arr1 <span class="op">=</span> df[<span class="st">'owner'</span>].array</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>arr2 <span class="op">=</span> df[<span class="st">'gender'</span>].array</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>arr3 <span class="op">=</span> []</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(arr1)):</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> arr2[i] <span class="op">==</span> <span class="st">'M'</span>:</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>        arr3.append(<span class="st">'Mr. '</span> <span class="op">+</span> arr1[i])</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>        arr3.append(<span class="st">'Ms. '</span> <span class="op">+</span> arr1[i])</span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'name5'</span>] <span class="op">=</span> arr3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><p>Vectorizes columns then concantenates with a <code>+</code></p></li>
<li><p>For-loop w/vectorization was faster than <code>apply</code> + list comprehension or for-loop + <code>itertuples</code> or for-loop + <code>iterrows</code></p></li>
</ul></li>
</ul></li>
<li><p>Concatenate string and non-string columns</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'colE'</span>] <span class="op">=</span> df[<span class="st">'colB'</span>].astype(<span class="bu">str</span>) <span class="op">+</span> <span class="st">'-'</span> <span class="op">+</span> df[<span class="st">'colD'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Extract pattern with list comprehension</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'colB'</span>] <span class="op">=</span> [re.search(<span class="st">'[0-9]'</span>, x)[<span class="dv">0</span>] <span class="cf">for</span> x <span class="kw">in</span> df[<span class="st">'colB'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>re is the regular expressions library</li>
<li>extracts all numeric characters</li>
</ul></li>
<li><p>Extract all instances of pattern into a list</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>results_ls <span class="op">=</span> re.findall(<span class="vs">r'\d+'</span>, s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Finds each number in string, s, and outputs into a list</li>
<li>Can also use <code>re.finditer</code></li>
<li>fyi <code>re.search</code> only returns the first match</li>
</ul></li>
<li><p>Extract pattern using regex</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'colB'</span>] <span class="op">=</span> df[<span class="st">'colB'</span>].<span class="bu">str</span>.extract(<span class="vs">r'(\d+)'</span>, expand<span class="op">=</span><span class="va">False</span>).astype(<span class="st">"int"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>r indicates youre using regex</li>
<li>extracts all numeric patterns and changes type to integer</li>
</ul></li>
<li><p>Remove pattern by <code>map</code> loop</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> string <span class="im">import</span> ascii_letters</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'colB'</span>] <span class="op">=</span> df[<span class="st">'colB'</span>].<span class="bu">map</span>(<span class="kw">lambda</span> x: x.lstrip(<span class="st">'+-'</span>).rstrip(ascii_letters))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>pluses or minuses are removed from if they are the leading character</li>
<li><code>lstrip</code> removes leading characters that match characters provided</li>
<li><code>rstrip</code> removes trailing characters that match characters provided</li>
</ul></li>
<li><p>Does a string contain one or more digits</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="bu">any</span>(c.isdigit() <span class="cf">for</span> c <span class="kw">in</span> s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="sec-py-pandas-ops-conv" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-conv">Conversions</h3>
<ul>
<li><p>Convert dict to pandas df (**slow for large lists**)</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame.from_dict(acct_dict, orient<span class="op">=</span><span class="st">"index"</span>, columns<span class="op">=</span>[<span class="st">"metrics"</span>])</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>result_df <span class="op">=</span> DataFrame.from_dict(search.cv_results_, orient<span class="op">=</span><span class="st">'columns'</span>)&nbsp;</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result_df.columns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>key of the dict is used as the index and value is column named metrics</li>
</ul></li>
<li><p>Convert pandas df to ndarray</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>ndarray <span class="op">=</span> df.to_numpy()</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="co"># using numpy</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>ndarray <span class="op">=</span> np.asarray(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Convert df to list or dict</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>&nbsp; ColA ColB&nbsp; ColC</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>&nbsp; &nbsp; <span class="dv">1</span>&nbsp; &nbsp; A&nbsp; &nbsp; <span class="dv">4</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>&nbsp; &nbsp; <span class="dv">2</span>&nbsp; &nbsp; B&nbsp; &nbsp; <span class="dv">5</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>&nbsp; &nbsp; <span class="dv">3</span>&nbsp; &nbsp; C&nbsp; &nbsp; <span class="dv">6</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> df.values.tolist()</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>, <span class="st">'A'</span>, <span class="dv">4</span>], [<span class="dv">2</span>, <span class="st">'B'</span>, <span class="dv">5</span>], [<span class="dv">3</span>, <span class="st">'C'</span>, <span class="dv">6</span>]]</span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>df.to_dict()</span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>{<span class="st">'ColA'</span>: {<span class="dv">0</span>: <span class="dv">1</span>, <span class="dv">1</span>: <span class="dv">2</span>, <span class="dv">2</span>: <span class="dv">3</span>},</span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a><span class="st">'ColB'</span>: {<span class="dv">0</span>: <span class="st">'A'</span>, <span class="dv">1</span>: <span class="st">'B'</span>, <span class="dv">2</span>: <span class="st">'C'</span>},</span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a><span class="st">'ColC'</span>: {<span class="dv">0</span>: <span class="dv">4</span>, <span class="dv">1</span>: <span class="dv">5</span>, <span class="dv">2</span>: <span class="dv">6</span>}}</span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>df.to_dict(<span class="st">"list"</span>)</span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>{<span class="st">'ColA'</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="st">'ColB'</span>: [<span class="st">'A'</span>, <span class="st">'B'</span>, <span class="st">'C'</span>], <span class="st">'ColC'</span>: [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]}</span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>df.to_dict(<span class="st">"split"</span>)</span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a>{<span class="st">'index'</span>: [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a><span class="st">'columns'</span>: [<span class="st">'ColA'</span>, <span class="st">'ColB'</span>, <span class="st">'ColC'</span>],</span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a><span class="st">'data'</span>: [[<span class="dv">1</span>, <span class="st">'A'</span>, <span class="dv">4</span>], [<span class="dv">2</span>, <span class="st">'B'</span>, <span class="dv">5</span>], [<span class="dv">3</span>, <span class="st">'C'</span>, <span class="dv">6</span>]]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Convert string variable to datetime</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>df.date_of_birth <span class="op">=</span> df.date_of_birth.astype(<span class="st">"datetime64[ns]"</span>)</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Year'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'Year'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Convert all object type columns to category</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> X.select_dtypes(include<span class="op">=</span>[<span class="st">'object'</span>]):</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>&nbsp; X[col] <span class="op">=</span> X[col].astype(<span class="st">'category'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Convert column to numeric</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'GDP'</span>] <span class="op">=</span> df[<span class="st">'GDP'</span>].astype(<span class="bu">float</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="sec-py-pandas-ops-sampsim" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-sampsim">Sample and Simulate</h3>
<ul>
<li><p>Simulate</p>
<ul>
<li><p>Random normal variable (and group variable named strata)</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.DataFrame({<span class="st">'strata'</span>: <span class="dv">1</span>, <span class="st">'y'</span>: np.random.normal(loc<span class="op">=</span><span class="dv">10</span>, scale<span class="op">=</span><span class="dv">1</span>, size<span class="op">=</span>size))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>2 columns strata (all 1s) and y</li>
<li>loc = mean, scale = sd, size = number of observations to create</li>
</ul></li>
</ul></li>
<li><p>Sample</p>
<ul>
<li><p>Rows</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>df.sample(n <span class="op">=</span> <span class="dv">15</span>, replace <span class="op">=</span> <span class="va">True</span>, random_state<span class="op">=</span><span class="dv">2</span>) <span class="co"># with replacement</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>sample_df <span class="op">=</span> df.sample(<span class="bu">int</span>(<span class="bu">len</span>(tps_df) <span class="op">*</span> <span class="fl">0.2</span>)) <span class="co"># sample 20% of the data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>This method is faster than sampling using random indices with NumPy</li>
</ul></li>
<li><p>Rows and columns</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>tps.sample(<span class="dv">5</span>, axis<span class="op">=</span><span class="dv">1</span>).sample(<span class="dv">7</span>, axis<span class="op">=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>5 columns and 7 rows</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-chain" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-chain">Chaining</h3>
<ul>
<li><p>Need to encapsulate code in parentheses</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to assign to an object</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>new_df <span class="op">=</span> (</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; melb</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; .query(<span class="st">"Distance &lt; 2 &amp; Rooms &gt; 2"</span>) <span class="co"># query equals filter in Pandas</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; .<span class="bu">filter</span>([<span class="st">"Type"</span>, <span class="st">"Price"</span>]) <span class="co"># filter equals select in Pandas</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; .groupby(<span class="st">"Type"</span>)</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; .agg([<span class="st">"mean"</span>, <span class="st">"count"</span>]) <span class="co"># calcs average price and row count for each Type; creates subcolumns mean and count under Price</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; .reset_index() <span class="co"># converts matrix to df</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; .set_axis([<span class="st">"Type"</span>, <span class="st">"averagePrice"</span>, <span class="st">"numberOfHouses"</span>], <span class="co"># renames Price to averagePrice and count to numberOfHouses</span></span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; axis <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inplace <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; .assign(averagePriceRounded <span class="op">=</span> <span class="kw">lambda</span> x: x[<span class="st">"averagePrice"</span>] <span class="co"># assign equals mutate in Pandas (?)</span></span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .<span class="bu">round</span>(<span class="dv">1</span>))</span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; .sort_values(by <span class="op">=</span> [<span class="st">"numberOfHouses"</span>],</span>
<span id="cb86-15"><a href="#cb86-15" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb86-16"><a href="#cb86-16" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>if <code>agg["mean"]</code> then there wouldnt be a subcolumn mean, just the values of Price would be the mean</li>
</ul></li>
<li><p>Using <code>pipe</code></p>
<ul>
<li><p>args</p>
<ul>
<li>func: Function to apply to the Series/DataFrame</li>
<li>args: Positional arguments passed to func</li>
<li>kwargs: Keyword arguments passed to func</li>
</ul></li>
<li><p>Returns: object, the return type of func</p></li>
<li><p>Syntax</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f1(df, arg1):</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="co"># do something return # a dataframe</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f2(df, arg2):</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="co"># do something return # a dataframe</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f3(df, arg3):</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="co"># do something return # a dataframe</span></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(..) <span class="co"># some dataframe</span></span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>df.pipe(f3, arg3 <span class="op">=</span> arg3).pipe(f2, arg2 <span class="op">=</span> arg2).pipe(f1, arg1 <span class="op">=</span> arg1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>function 3 (f3) is executed then function 2 then function 1</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-xtab" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-xtab">Crosstab</h3>
<ul>
<li><p><span class="ribbon-highlight">Example</span></p>
<div class="sourceCode" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame([[<span class="st">"A"</span>, <span class="st">"X"</span>],&nbsp;</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [<span class="st">"B"</span>, <span class="st">"Y"</span>],&nbsp;</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [<span class="st">"C"</span>, <span class="st">"X"</span>],</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [<span class="st">"A"</span>, <span class="st">"X"</span>]],&nbsp;</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; columns <span class="op">=</span> [<span class="st">"col1"</span>, <span class="st">"col2"</span>])</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pd.crosstab(df.col1, df.col2))</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>col2&nbsp; X&nbsp; Y</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>col1&nbsp; &nbsp; &nbsp;</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>A&nbsp; &nbsp; <span class="dv">2</span>&nbsp; <span class="dv">0</span></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>B&nbsp; &nbsp; <span class="dv">0</span>&nbsp; <span class="dv">1</span></span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>C&nbsp; &nbsp; <span class="dv">1</span>&nbsp; <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="sec-py-pandas-ops-pvttbl" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-pvttbl">Pivot Table</h3>
<ul>
<li><p><span class="ribbon-highlight">Example</span></p>
<div class="sourceCode" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; Name&nbsp; Subject&nbsp; Marks</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>&nbsp; John&nbsp; &nbsp; Maths&nbsp; &nbsp; &nbsp; <span class="dv">6</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>&nbsp; Mark&nbsp; &nbsp; Maths&nbsp; &nbsp; &nbsp; <span class="dv">5</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>&nbsp; Peter&nbsp; &nbsp; Maths&nbsp; &nbsp; &nbsp; <span class="dv">3</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>&nbsp; John&nbsp; Science&nbsp; &nbsp; &nbsp; <span class="dv">5</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>&nbsp; Mark&nbsp; Science&nbsp; &nbsp; &nbsp; <span class="dv">8</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>&nbsp; Peter&nbsp; Science&nbsp; &nbsp; <span class="dv">10</span></span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>&nbsp; John&nbsp; English&nbsp; &nbsp; <span class="dv">10</span></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>&nbsp; Mark&nbsp; English&nbsp; &nbsp; &nbsp; <span class="dv">6</span></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>&nbsp; Peter&nbsp; English&nbsp; &nbsp; &nbsp; <span class="dv">4</span></span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a>pd.pivot_table(df,&nbsp;</span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; index <span class="op">=</span> [<span class="st">"Name"</span>],</span>
<span id="cb89-15"><a href="#cb89-15" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; columns<span class="op">=</span>[<span class="st">"Subject"</span>],&nbsp;</span>
<span id="cb89-16"><a href="#cb89-16" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; values<span class="op">=</span><span class="st">'Marks'</span>,</span>
<span id="cb89-17"><a href="#cb89-17" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fill_value<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb89-18"><a href="#cb89-18" aria-hidden="true" tabindex="-1"></a>Subject&nbsp; English&nbsp; Maths&nbsp; Science</span>
<span id="cb89-19"><a href="#cb89-19" aria-hidden="true" tabindex="-1"></a>Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>
<span id="cb89-20"><a href="#cb89-20" aria-hidden="true" tabindex="-1"></a>John&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="dv">10</span>&nbsp; &nbsp; &nbsp; <span class="dv">6</span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="dv">5</span></span>
<span id="cb89-21"><a href="#cb89-21" aria-hidden="true" tabindex="-1"></a>Mark&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="dv">6</span>&nbsp; &nbsp; &nbsp; <span class="dv">5</span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="dv">8</span></span>
<span id="cb89-22"><a href="#cb89-22" aria-hidden="true" tabindex="-1"></a>Peter&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="dv">4</span>&nbsp; &nbsp; &nbsp; <span class="dv">3</span>&nbsp; &nbsp; &nbsp; <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><span class="ribbon-highlight">Example</span>: drop lowest score for each letter grade, then calculate the average score for each letter grade</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>grades_df.pivot_table(index<span class="op">=</span><span class="st">'name'</span>,</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; columns<span class="op">=</span><span class="st">'letter grade'</span>,</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; values<span class="op">=</span><span class="st">'score'</span>,</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; aggfunc <span class="op">=</span> <span class="kw">lambda</span> series : (<span class="bu">sorted</span>(<span class="bu">list</span>(series))[<span class="op">-</span><span class="dv">1</span>] <span class="op">+</span> <span class="bu">sorted</span>(<span class="bu">list</span>(series))[<span class="op">-</span><span class="dv">2</span>]) <span class="op">/</span> <span class="dv">2</span>)</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>letter grade&nbsp; &nbsp; A&nbsp; &nbsp; B</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>name</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>Arif&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="fl">96.5</span>&nbsp; <span class="fl">87.0</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>Kayla&nbsp; &nbsp; &nbsp; &nbsp; <span class="fl">95.5</span>&nbsp; <span class="fl">84.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>grades_df
<ul>
<li>2 names (name)</li>
<li>6 scores (score)</li>
<li>Only 2 letter grades associated with these scores (letter grade)</li>
</ul></li>
<li>index: each row will be a name</li>
<li>columns: each column will be a letter grade</li>
<li>values: value in the cells will be from the score column according to each combination columns in the index and columns args</li>
<li>aggfunc: uses a lambda to compute the aggregated values
<ul>
<li>series is used a the variable&nbsp; in the lambda function</li>
<li>sorts series (ascending), takes the top two values (using negative list indexing), and averages them</li>
</ul></li>
<li>Iterate over a df
<ul>
<li>Better to use a vectorized solution if possible</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ops-iter" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ops-iter">Iteration</h3>
<ul>
<li><p>iterrows</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> salary_iterrows(df):</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; salary_sum <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="cf">for</span> index, row <span class="kw">in</span> df.iterrows():</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; salary_sum <span class="op">+=</span> row[<span class="st">'Employee Salary'</span>]</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="cf">return</span> salary_sum<span class="op">/</span>df.shape[<span class="dv">0</span>]</span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>salary_iterrows(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>iteruples</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> salary_itertuples(df):</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; salary_sum <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="cf">for</span> row <span class="kw">in</span> df.itertuples():&nbsp;</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; salary_sum <span class="op">+=</span> row._4</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="cf">return</span> salary_sum<span class="op">/</span>df.shape[<span class="dv">0</span>]</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>salary_itertuples(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Faster than iterrows</li>
</ul></li>
</ul>
</section>
</section>
<section id="sec-py-pandas-ts" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ts">Time Series</h2>
<section id="misc" class="level3">
<h3 class="anchored" data-anchor-id="misc">Misc</h3>
<ul>
<li>Also see
<ul>
<li><a href="https://towardsdatascience.com/a-collection-of-must-know-techniques-for-working-with-time-series-data-in-python-7c01d199b184">A Collection of Must-Know Techniques for Working with Time Series Data in Python</a>
<ul>
<li>Collection of preprocessing recipes</li>
</ul></li>
<li><span style="color: goldenrod">{{datetime}}</span> in bkmks</li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ts-ops" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ts-ops">Operations</h3>
<ul>
<li><p>Load and set index frequency</p>
<ul>
<li><p><span class="ribbon-highlight">Example</span></p>
<div class="sourceCode" id="cb93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Load the PCE and UMCSENT datasets</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; filepath_or_buffer<span class="op">=</span><span class="st">'UMCSENT_PCE.csv'</span>,</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; header<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; index_col<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; infer_datetime_format<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; parse_dates<span class="op">=</span>[<span class="st">'DATE'</span>]</span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Set the index frequency to 'Month-Start'</span></span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.asfreq(<span class="st">'MS'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>header=0 is default, says 1st row of file is the column names</li>
<li>index_col=0 says use the first column as the df index</li>
<li>infer_datetime_format=True says infer the format of the datetime strings in the columns</li>
<li>parse_dates=[DATE] says convert DATE to datetime and format</li>
</ul></li>
</ul></li>
<li><p>Create date variable</p>
<ul>
<li><p><span class="ribbon-highlight">Example</span>: w/<code>date_range</code></p>
<div class="sourceCode" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DataFrame</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>date_range <span class="op">=</span> pd.date_range(<span class="st">'1/2/2022'</span>, periods<span class="op">=</span><span class="dv">24</span>, freq<span class="op">=</span><span class="st">'H'</span>)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>sales <span class="op">=</span> np.random.randint(<span class="dv">100</span>, <span class="dv">400</span>, size<span class="op">=</span><span class="dv">24</span>)</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>sales_data <span class="op">=</span> pd.DataFrame(</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; sales,</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; index <span class="op">=</span> date_range,</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; columns <span class="op">=</span> [<span class="st">'Sales'</span>]</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Series</span></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>rng <span class="op">=</span> pd.date_range(<span class="st">"1/1/2012"</span>, periods<span class="op">=</span><span class="dv">100</span>, freq<span class="op">=</span><span class="st">"S"</span>)</span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randint(<span class="dv">0</span>, <span class="dv">500</span>, <span class="bu">len</span>(rng)), index<span class="op">=</span>rng)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Methods (<a href="https://towardsdatascience.com/dealing-with-dates-in-pythons-dataframe-part-1-date-series-creation-f4a800db9ae">article</a>)</p>
<ul>
<li><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.date_range.html?highlight=date_range#pandas.date_range">pandas.date_range</a>  Return a fixed frequency DatetimeIndex.
<ul>
<li>start: the start date of the date range generated</li>
<li>end: the end date of the date range generated</li>
<li>periods: the number of dates generated</li>
<li>freq: default to D (daily), the interval between dates generated, it could be hourly, monthly or yearly</li>
</ul></li>
<li><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.bdate_range.html">pandas.bdate_range</a>  Return a fixed frequency DatetimeIndex, with the business day as the default frequency.</li>
<li><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.period_range.html">pandas.period_range</a>  Return a fixed frequency PeriodIndex. The day (calendar) is the default frequency.</li>
<li><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.timedelta_range.html">pandas.timedelta_range</a>  Return a fixed frequency TimedeltaIndex, with the day as the default frequency.</li>
</ul></li>
</ul></li>
<li><p>Coerce to datetime</p>
<ul>
<li><p>Source has month first or day first</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># month first</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="co"># e.g 9/16/2015 --&gt; 2015-09-16</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'joining_date'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'joining_date'</span>])</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="co"># day first</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a><span class="co"># e.g 16/9/2015 --&gt; 2015-09-16</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'joining_date'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'joining_date'</span>], dayfirst<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>default is month first</li>
<li>* If the first digit is a number that can NOT be a month (e.g.&nbsp;25), then it will parse it as a day instead. *</li>
</ul></li>
<li><p>Format conditional on sources delimiter</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'joining_date_clean'</span>] <span class="op">=</span> np.where(df[<span class="st">'joining_date'</span>].<span class="bu">str</span>.contains(<span class="st">'/'</span>),</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pd.to_datetime(df[<span class="st">'joining_date'</span>]),</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pd.to_datetime(df[<span class="st">'joining_date'</span>], dayfirst<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Like an ifelse. Source dates that have / separating values are parsed as month-first and everything else as day-first</li>
</ul></li>
</ul></li>
<li><p>Transform partial date columns</p>
<ul>
<li><p><span class="ribbon-highlight">Example</span>: String <code>09/2007</code>&nbsp;will be transformed to date&nbsp;<code>2007-09-01</code></p>
<div class="sourceCode" id="cb97"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> parse_first_brewed(text: <span class="bu">str</span>) <span class="op">-&gt;</span> datetime.date:</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>    parts <span class="op">=</span> text.split(<span class="st">'/'</span>)</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(parts) <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> datetime.date(<span class="bu">int</span>(parts[<span class="dv">1</span>]), <span class="bu">int</span>(parts[<span class="dv">0</span>]), <span class="dv">1</span>)</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="bu">len</span>(parts) <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> datetime.date(<span class="bu">int</span>(parts[<span class="dv">0</span>]), <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> <span class="va">False</span>, <span class="st">'Unknown date format'</span></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> parse_first_brewed(<span class="st">'09/2007'</span>)</span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a>datetime.date(<span class="dv">2007</span>, <span class="dv">9</span>, <span class="dv">1</span>)</span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> parse_first_brewed(<span class="st">'2006'</span>)</span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a>datetime.date(<span class="dv">2006</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul></li>
<li><p>Extract time components</p>
<ul>
<li>Create year-month column: <code>df["year_month"] = df["created_at"].dt.to_period("M")</code>
<ul>
<li>M is the offset alias string for month</li>
<li>(<a href="https://pandas.pydata.org/docs/user_guide/timeseries.html#timeseries-offset-aliases">Docs</a>)</li>
</ul></li>
</ul></li>
<li><p>Filter a range</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>gallipoli_data.loc[</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; (gallipoli_data.DateTime <span class="op">&gt;=</span> <span class="st">'2008-01-02'</span>)&nbsp;</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; <span class="op">&amp;</span>&nbsp;</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; (gallipoli_data.DateTime <span class="op">&lt;=</span> <span class="st">'2008-01-03'</span>)</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Fill in gaps</p>
<ul>
<li><p><span class="ribbon-highlight">Example</span>: hacky way to do it</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; sales_data.Sales.resample(<span class="st">'h'</span>).mean()</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>frequency is already hourly (h), so taking the mean doesnt change the values. But NaNs will be added for datetime values that dont exist.</li>
<li><code>.fillna(0)</code> can be added to <code>.mean()</code> if you want to fill the NaNs with something meaningful (e.g.&nbsp;0)</li>
</ul></li>
<li><p>Explode interval between 2 date columns into a column with all the dates in that interval</p>
<ul>
<li><p><span class="ribbon-highlight">Example</span>: 1 row</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>pd.date_range(calendar[<span class="st">"checkin_date"</span>][<span class="dv">0</span>], calendar[<span class="st">"checkout_date"</span>][<span class="dv">0</span>])</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="co"># output</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>DatetimeIndex([<span class="st">'2022-06-01'</span>, <span class="st">'2022-06-02'</span>, <span class="st">'2022-06-03'</span>,&nbsp;</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st">'2022-06-04'</span>, <span class="st">'2022-06-05'</span>, <span class="st">'2022-06-06'</span>,&nbsp;</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st">'2022-06-07'</span>],</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dtype<span class="op">=</span><span class="st">'datetime64[ns]'</span>, freq<span class="op">=</span><span class="st">'D'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><span class="ribbon-highlight">Example</span>: all rows<br>
<a href="./_resources/Python,_Pandas.resources/image.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="./_resources/Python,_Pandas.resources/image.png" class="img-fluid" width="479"></a></p>
<div class="sourceCode" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>calendar.loc[:, <span class="st">"booked_days"</span>] <span class="op">=</span> calendar.<span class="bu">apply</span>(</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="kw">lambda</span> x: <span class="bu">list</span>(</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; pd.date_range(</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x.checkin_date,&nbsp;</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x.checkout_date <span class="op">+</span> pd.DateOffset(days<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; ).date</span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; ),</span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; axis <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><span class="ribbon-highlight">Example</span>: pivot_longer<br>
<a href="./_resources/Python,_Pandas.resources/image.1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="./_resources/Python,_Pandas.resources/image.1.png" class="img-fluid" width="141"></a></p>
<div class="sourceCode" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># explode&nbsp;</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>calendar <span class="op">=</span> calendar.explode(</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; column<span class="op">=</span><span class="st">"booked_days"</span>, ignore_index<span class="op">=</span><span class="va">True</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>)[[<span class="st">"property"</span>,<span class="st">"booked_days"</span>]]</span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="co"># display the first 5 rows</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>calendar.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ts-calcs" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ts-calcs">Calculations</h3>
<ul>
<li><p>Get the min/max dates of a dataset: <code>print(df.Date.agg(['min', 'max']))</code> (Date is the date variable)</p></li>
<li><p>Find difference between to date columns</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"days_to_checkin"</span>] <span class="op">=</span> (df[<span class="st">"checkin_date"</span>] <span class="op">-</span> df[<span class="st">"created_at"</span>]).dt.days</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>number of days between the check-in date and the date booking was created (i.e.&nbsp;number of days until the customer arrives)</li>
</ul></li>
<li><p>Add 1 day to a subset of observations</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">"booking_id"</span>]<span class="op">==</span><span class="dv">1001</span>, <span class="st">"checkout_date"</span>] <span class="op">=</span> df.loc[df[<span class="st">"booking_id"</span>]<span class="op">==</span><span class="dv">1001</span>, <span class="st">"checkout_date"</span>] <span class="op">+</span> pd.DateOffset(days<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>adds 1 day to the checkout date of the booking with id 1001</li>
</ul></li>
<li><p>Aggregation</p>
<ul>
<li>Misc
<ul>
<li><code>resample</code> (<a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#resampling">docs</a>) requires a datetime type column set as the index for the dataframe: <code>df.index = df[DateTime]</code>
<ul>
<li>btw this function doesnt resample in the bootstrapping sense of the word. Just a function that allows you to do window calculations on time series</li>
</ul></li>
<li>Common time strings (<a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#dateoffset-objects">docs</a>)
<ul>
<li>s for seconds</li>
<li>t for minutes</li>
<li>h for hours</li>
<li>w for weeks</li>
<li>m for months</li>
<li>q for quarter</li>
</ul></li>
</ul></li>
<li>Rolling-Window
<ul>
<li><p><span class="ribbon-highlight">Example</span>: 30-day rolling average</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>window_mavg_short<span class="op">=</span><span class="dv">30</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>stock_df[<span class="st">'mav_short'</span>] <span class="op">=</span> stock_df[<span class="st">'Close'</span>] <span class="op">\</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; .rolling(window<span class="op">=</span>window_mavg_short) <span class="op">\</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; .mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul></li>
<li>Step-Window
<ul>
<li><p><span class="ribbon-highlight">Example</span>: Mean temperature every 3 hours<br>
<a href="./_resources/Python,_Pandas.resources/image.3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="./_resources/Python,_Pandas.resources/image.3.png" class="img-fluid" width="217"></a></p>
<div class="sourceCode" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>gallipoli_data.Temperature.resample(rule <span class="op">=</span> <span class="dv">3</span><span class="er">h</span>).mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>1.766667 is the average from 03:00:00 to 05:00:00</li>
<li>4.600000 is the average from 06:00:00 to 08:00:00</li>
<li>h is the time string from hours</li>
<li>By default the calculation window starts on the left index (see next <span class="ribbon-highlight">Example</span> for right index) and doesnt include the right index
<ul>
<li>e.g.&nbsp;index, 09:00:00, calculation window includes 09:00:00, 10:00:00, and 11:00:00</li>
</ul></li>
</ul></li>
<li><p><span class="ribbon-highlight">Example</span>: Max sunshine every 3 hrs<br>
<a href="./_resources/Python,_Pandas.resources/image.4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="./_resources/Python,_Pandas.resources/image.4.png" class="img-fluid" width="283"></a></p>
<div class="sourceCode" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>gallipoli_data[<span class="st">'Sunshine Duration'</span>].resample(rule <span class="op">=</span> <span class="st">'3h'</span>, closed<span class="op">=</span> <span class="st">'right'</span>).<span class="bu">max</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>closed=right says include the right index in the calculation but not the left
<ul>
<li>e.g.&nbsp;index, 09:00:00, calculation window includes 10:00:00, 11:00:00, and 12:00:00</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-ts-sim" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-ts-sim">Simulation</h3>
<ul>
<li><p><span class="ribbon-highlight">Example</span>: simulation, gaussian<br>
<a href="./_resources/Python,_Pandas.resources/image.9.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="./_resources/Python,_Pandas.resources/image.9.png" class="img-fluid" width="585"></a></p>
<div class="sourceCode" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">987</span>)</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>time_series <span class="op">=</span> [np.random.normal()<span class="op">*</span><span class="fl">0.1</span>, np.random.normal()<span class="op">*</span><span class="fl">0.1</span>]</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>sigs <span class="op">=</span> [<span class="fl">0.1</span>, <span class="fl">0.1</span>]</span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2000</span>):</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; sig_t <span class="op">=</span> np.sqrt(<span class="fl">0.1</span> <span class="op">+</span> <span class="fl">0.24</span><span class="op">*</span>time_series[<span class="op">-</span><span class="dv">1</span>]<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="fl">0.24</span><span class="op">*</span>time_series[<span class="op">-</span><span class="dv">2</span>]<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="fl">0.24</span><span class="op">*</span>sigs[<span class="op">-</span><span class="dv">1</span>]<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="fl">0.24</span><span class="op">*</span>sigs[<span class="op">-</span><span class="dv">2</span>]<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; y_t <span class="op">=</span> np.random.normal() <span class="op">*</span> sig_t</span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; time_series.append(y_t)</span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; sigs.append(sig_t)</span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.array(time_series[<span class="dv">2</span>:])</span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">16</span>,<span class="dv">8</span>))</span>
<span id="cb108-14"><a href="#cb108-14" aria-hidden="true" tabindex="-1"></a>plt.plot(y, label <span class="op">=</span> <span class="st">"Simulated Time-Series"</span>)</span>
<span id="cb108-15"><a href="#cb108-15" aria-hidden="true" tabindex="-1"></a>plt.grid(alpha <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb108-16"><a href="#cb108-16" aria-hidden="true" tabindex="-1"></a>plt.legend(fontsize <span class="op">=</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Standard GARCH time-series thats frequently encountered in econometrics</p>
<ul>
<li><p><span class="ribbon-highlight">Example</span>: simulation, beta<br>
<a href="./_resources/Python,_Pandas.resources/image.10.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="./_resources/Python,_Pandas.resources/image.10.png" class="img-fluid" width="585"></a></p>
<div class="sourceCode" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> beta</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">321</span>)</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>time_series <span class="op">=</span> [beta(<span class="fl">0.5</span>,<span class="dv">10</span>).rvs()]</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2000</span>):</span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; alpha_t <span class="op">=</span> <span class="fl">0.5</span> <span class="op">+</span> time_series[<span class="op">-</span><span class="dv">1</span>] <span class="op">*</span> <span class="fl">0.025</span> <span class="op">*</span> t</span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; beta_t <span class="op">=</span> alpha_t <span class="op">*</span> <span class="dv">20</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; y_t <span class="op">=</span> beta(alpha_t, beta_t).rvs()</span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; time_series.append(y_t)</span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.array(time_series[<span class="dv">1</span>:])</span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">16</span>,<span class="dv">8</span>))</span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a>plt.plot(y, label <span class="op">=</span> <span class="st">"Simulated Time-Series"</span>)</span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a>plt.grid(alpha <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a>plt.legend(fontsize <span class="op">=</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul></li>
</ul>
</section>
</section>
<section id="sec-py-pandas-opt" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-py-pandas-opt">Optimization</h2>
<section id="sec-py-pandas-opt-perf" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-opt-perf">Performance</h3>
<ul>
<li><p>Pandas will typically outperform numpy ndarrays in cases that involve significantly larger volume of data (say &gt;500K rows)</p></li>
<li><p>Bad performance by iteratively creating rows in a dataframe</p>
<ul>
<li>Better to iteratively append lists then coerce to a dataframe at the end</li>
<li>Use <code>itertuples</code> instead of <code>iterrows</code> in loops<a href="./_resources/Python,_Pandas.resources/image.11.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="./_resources/Python,_Pandas.resources/image.11.png" class="img-fluid" width="376"></a>
<ul>
<li>Iterates through the data frame by converting each row of data as a list of tuples. Makes comparatively less number of function calls and hence carry less overhead.</li>
<li><code>tqdm::tqdm</code> is a progress bar for loops</li>
</ul></li>
</ul></li>
<li><p>Libraries</p>
<ul>
<li><span style="color: goldenrod">{{</span><a href="https://nalepae.github.io/pandarallel/" style="color: goldenrod">pandarallel</a><span style="color: goldenrod">}}</span> - A simple and efficient tool to parallelize Pandas operations on all available CPUs.
<ul>
<li><a href="https://towardsdatascience.com/introducing-pandarallel-never-use-the-apply-method-in-pandas-again-7f3ff74fbe8e">article</a>, <a href="https://towardsdatascience.com/4x-faster-pandas-operations-with-minimal-code-change-bc7079792184">article</a></li>
</ul></li>
<li><span style="color: goldenrod">{{</span><a href="https://pypi.org/project/parallel-pandas/" style="color: goldenrod">parallel_pandas</a><span style="color: goldenrod">}}</span> -&nbsp; A simple and efficient tool to parallelize Pandas operations on all available CPUs.
<ul>
<li><a href="https://towardsdatascience.com/easily-parallelize-your-calculations-in-pandas-with-parallel-pandas-dc194b82d82f">article</a></li>
</ul></li>
<li><span style="color: goldenrod">{{</span><a href="https://modin.readthedocs.io/en/stable/" style="color: goldenrod">modin</a><span style="color: goldenrod">}}</span> - multi-processing package with identical APIs to Pandas, to speed up the Pandas workflow by changing 1 line of code. Modin offers accelerated performance for about 90+% of Pandas API. Modin uses Ray and Dask under the hood for distributed computing.
<ul>
<li><a href="https://towardsdatascience.com/modin-speed-up-your-pandas-notebooks-scripts-and-libraries-c2ac7de45b75">article</a></li>
</ul></li>
<li><span style="color: goldenrod">{{</span><a href="https://towardsdatascience.com/this-decorator-will-make-python-30-times-faster-715ca5a66d5f" style="color: goldenrod">numba</a><span style="color: goldenrod">}}</span> - JIT compiler that translates a subset of Python and NumPy code into fast machine code.
<ul>
<li><p>works best with functions that involve many native Python loops, a lot of math, and even better, NumPy functions and arrays</p></li>
<li><p><span class="ribbon-highlight">Example</span></p>
<div class="sourceCode" id="cb110"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="at">@numba.jit</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> crazy_function(col1, col2, col3):</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="cf">return</span> (col1 <span class="op">**</span> <span class="dv">3</span> <span class="op">+</span> col2 <span class="op">**</span> <span class="dv">2</span> <span class="op">+</span> col3 <span class="op">*</span> <span class="dv">10</span>) <span class="op">**</span> <span class="fl">0.5</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>massive_df[<span class="st">"f1001"</span>] <span class="op">=</span> crazy_function(</span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; massive_df[<span class="st">"f1"</span>].values, massive_df[<span class="st">"f56"</span>].values, massive_df[<span class="st">"f44"</span>].values</span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>Wall time: <span class="dv">201</span> ms</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>9GB dataset</li>
<li>JIT stands for just in time, and it translates pure Python and NumPy code to native machine instructions</li>
</ul></li>
</ul></li>
</ul></li>
<li><p>Use numpy arrays</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>dat[<span class="st">'col1001'</span>] <span class="op">=</span> some_function(</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dat[<span class="st">'col1'</span>].values, dat[<span class="st">'col2'</span>].values, dat[<span class="st">'col3'</span>].values</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><p>Adding the <code>.values</code> to the column vectors coerces to ndarrays</p></li>
<li><p>NumPy arrays are faster because they dont perform additional calls for indexing, data type checking like Pandas Series</p></li>
</ul></li>
<li><p><code>eval</code> for non-mathematical operations (e.g.&nbsp;boolean indexing, comparisons, etc.)</p>
<ul>
<li><p><a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/enhancingperf.html#expression-evaluation-via-eval">Docs</a></p></li>
<li><p><span class="ribbon-highlight">Example</span></p>
<div class="sourceCode" id="cb112"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>massive_df.<span class="bu">eval</span>(<span class="st">"col1001 = (col1 ** 3 + col2 ** 2 + col3 * 10) ** 0.5"</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Used a mathematical operation for his example for some reason</li>
</ul></li>
</ul></li>
<li><p><code>iloc</code> vs <code>loc</code></p>
<ul>
<li>iloc faster for filtering rows: <code>dat.iloc[range(10000)]</code></li>
<li>loc faster for selecting columns: <code>dat.loc[:, ["f1", "f2", "f3"]]</code></li>
<li>noticeable as data size increases</li>
</ul></li>
</ul>
</section>
<section id="sec-py-pandas-opt-mem" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-py-pandas-opt-mem">Memory Optimization</h3>
<ul>
<li><p>See memory size of an object</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">"dummy_dataset.csv"</span>)</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>data.info(memory_usage <span class="op">=</span> <span class="st">"deep"</span>)</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>data.memory_usage(deep<span class="op">=</span><span class="va">True</span>)&nbsp; <span class="op">/</span> <span class="dv">1024</span> <span class="op">**</span> <span class="dv">2</span> <span class="co"># displays col sizes in MBs</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="co"># or for just 1 variable</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>data.Country.memory_usage()</span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a><span class="co"># a few columns</span></span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>memory_usage <span class="op">=</span> df.memory_usage(deep<span class="op">=</span><span class="va">True</span>) <span class="op">/</span> <span class="dv">1024</span> <span class="op">**</span> <span class="dv">2</span> <span class="co"># displays col sizes in MBs</span></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>memory_usage.head(<span class="dv">7</span>)</span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>memory_usage.<span class="bu">sum</span>() <span class="co"># total</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Use inplace transformation (i.e.&nbsp;dont create new copies of the df) to reduce memory load</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>df.fillna(<span class="dv">0</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="co"># instead of</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>df_copy <span class="op">=</span> df.fillna(<span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Load only the columns you need from a file</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>col_list <span class="op">=</span> [<span class="st">"Employee_ID"</span>, <span class="st">"First_Name"</span>, <span class="st">"Salary"</span>, <span class="st">"Rating"</span>, <span class="st">"Company"</span>]</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">"dummy_dataset.csv"</span>, usecols<span class="op">=</span>col_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Variable datatypes<br>
<a href="./_resources/Python,_Pandas.resources/image.5.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="./_resources/Python,_Pandas.resources/image.5.png" class="img-fluid" width="586"></a></p>
<ul>
<li><p>Convert variables to smaller types when possible</p>
<ul>
<li>Variables always receive largest memory types
<ul>
<li>Pandas will always assign <code>int64</code> as the datatype of the integer-valued column, irrespective of the range of current values in the column.</li>
</ul></li>
</ul></li>
<li><p>Byte ranges (same bit options for floats)<br>
<a href="./_resources/Python,_Pandas.resources/image.6.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="./_resources/Python,_Pandas.resources/image.6.png" class="img-fluid" width="407"></a></p>
<ul>
<li><code>uint</code> refers to unsigned, only positive integers</li>
<li><code>int8</code>: 8-bit-integer that covers integers from [-2, 2].</li>
<li><code>int16</code>: 16-bit-integer that covers integers from [-2, 2].</li>
<li><code>int32</code>: 32-bit-integer that covers integers from [-2, 2].</li>
<li><code>int64</code>: 64-bit-integer that covers integers from [-2, 2].</li>
</ul></li>
<li><p>Convert integer column to smaller type: <code>data["Employee_ID"] = data.Employee_ID.astype(np.int32)</code></p></li>
<li><p>Convert all object type columns to category</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> X.select_dtypes(include<span class="op">=</span>[<span class="st">'object'</span>]):</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>&nbsp; X[col] <span class="op">=</span> X[col].astype(<span class="st">'category'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>object datatype consumes the most memory. Either use str or category if there are few unique values in the feature</li>
<li><code>pd.Categorical</code> data type can speed things up to 10 times while using <a href="https://towardsdatascience.com/how-to-beat-the-heck-out-of-xgboost-with-lightgbm-comprehensive-tutorial-5eba52195997">LightGBMs default categorical</a> handler</li>
</ul></li>
<li><p>For <code>datetime</code> or <code>timedelta</code>, use the native formats offered in pandas since they enable special manipulation functions</p></li>
<li><p>Function for checking and converting all numerical columns in dataframes to optimal types</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> reduce_memory_usage(df, verbose<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; numerics <span class="op">=</span> [<span class="st">"int8"</span>, <span class="st">"int16"</span>, <span class="st">"int32"</span>, <span class="st">"int64"</span>, <span class="st">"float16"</span>, <span class="st">"float32"</span>, <span class="st">"float64"</span>]</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; start_mem <span class="op">=</span> df.memory_usage().<span class="bu">sum</span>() <span class="op">/</span> <span class="dv">1024</span> <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="cf">for</span> col <span class="kw">in</span> df.columns:</span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; col_type <span class="op">=</span> df[col].dtypes</span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; <span class="cf">if</span> col_type <span class="kw">in</span> numerics:</span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c_min <span class="op">=</span> df[col].<span class="bu">min</span>()</span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c_max <span class="op">=</span> df[col].<span class="bu">max</span>()</span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cf">if</span> <span class="bu">str</span>(col_type)[:<span class="dv">3</span>] <span class="op">==</span> <span class="st">"int"</span>:</span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cf">if</span> c_min <span class="op">&gt;</span> np.iinfo(np.int8).<span class="bu">min</span> <span class="kw">and</span> c_max <span class="op">&lt;</span> np.iinfo(np.int8).<span class="bu">max</span>:</span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; df[col] <span class="op">=</span> df[col].astype(np.int8)</span>
<span id="cb117-12"><a href="#cb117-12" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cf">elif</span> c_min <span class="op">&gt;</span> np.iinfo(np.int16).<span class="bu">min</span> <span class="kw">and</span> c_max <span class="op">&lt;</span> np.iinfo(np.int16).<span class="bu">max</span>:</span>
<span id="cb117-13"><a href="#cb117-13" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; df[col] <span class="op">=</span> df[col].astype(np.int16)</span>
<span id="cb117-14"><a href="#cb117-14" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cf">elif</span> c_min <span class="op">&gt;</span> np.iinfo(np.int32).<span class="bu">min</span> <span class="kw">and</span> c_max <span class="op">&lt;</span> np.iinfo(np.int32).<span class="bu">max</span>:</span>
<span id="cb117-15"><a href="#cb117-15" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; df[col] <span class="op">=</span> df[col].astype(np.int32)</span>
<span id="cb117-16"><a href="#cb117-16" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cf">elif</span> c_min <span class="op">&gt;</span> np.iinfo(np.int64).<span class="bu">min</span> <span class="kw">and</span> c_max <span class="op">&lt;</span> np.iinfo(np.int64).<span class="bu">max</span>:</span>
<span id="cb117-17"><a href="#cb117-17" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; df[col] <span class="op">=</span> df[col].astype(np.int64)</span>
<span id="cb117-18"><a href="#cb117-18" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cf">else</span>:</span>
<span id="cb117-19"><a href="#cb117-19" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cf">if</span> (</span>
<span id="cb117-20"><a href="#cb117-20" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c_min <span class="op">&gt;</span> np.finfo(np.float16).<span class="bu">min</span></span>
<span id="cb117-21"><a href="#cb117-21" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw">and</span> c_max <span class="op">&lt;</span> np.finfo(np.float16).<span class="bu">max</span></span>
<span id="cb117-22"><a href="#cb117-22" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ):</span>
<span id="cb117-23"><a href="#cb117-23" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; df[col] <span class="op">=</span> df[col].astype(np.float16)</span>
<span id="cb117-24"><a href="#cb117-24" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cf">elif</span> (</span>
<span id="cb117-25"><a href="#cb117-25" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c_min <span class="op">&gt;</span> np.finfo(np.float32).<span class="bu">min</span></span>
<span id="cb117-26"><a href="#cb117-26" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw">and</span> c_max <span class="op">&lt;</span> np.finfo(np.float32).<span class="bu">max</span></span>
<span id="cb117-27"><a href="#cb117-27" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ):</span>
<span id="cb117-28"><a href="#cb117-28" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; df[col] <span class="op">=</span> df[col].astype(np.float32)</span>
<span id="cb117-29"><a href="#cb117-29" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cf">else</span>:</span>
<span id="cb117-30"><a href="#cb117-30" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; df[col] <span class="op">=</span> df[col].astype(np.float64)</span>
<span id="cb117-31"><a href="#cb117-31" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; end_mem <span class="op">=</span> df.memory_usage().<span class="bu">sum</span>() <span class="op">/</span> <span class="dv">1024</span> <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb117-32"><a href="#cb117-32" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="cf">if</span> verbose:</span>
<span id="cb117-33"><a href="#cb117-33" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; <span class="bu">print</span>(</span>
<span id="cb117-34"><a href="#cb117-34" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st">"Mem. usage decreased to </span><span class="sc">{:.2f}</span><span class="st"> Mb (</span><span class="sc">{:.1f}% r</span><span class="st">eduction)"</span>.<span class="bu">format</span>(</span>
<span id="cb117-35"><a href="#cb117-35" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end_mem, <span class="dv">100</span> <span class="op">*</span> (start_mem <span class="op">-</span> end_mem) <span class="op">/</span> start_mem</span>
<span id="cb117-36"><a href="#cb117-36" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span>
<span id="cb117-37"><a href="#cb117-37" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; )</span>
<span id="cb117-38"><a href="#cb117-38" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; <span class="cf">return</span> df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Based on the minimum and maximum value of a numeric column and the above table, the function converts it to the smallest subtype possible</li>
</ul></li>
<li><p>Check memory usage before and after conversion</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Memory usage before changing the datatype:"</span>, data.Country.memory_usage())</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>data[<span class="st">"Country"</span>] <span class="op">=</span> data.Country.astype(<span class="st">"category"</span>)</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Memory usage after changing the datatype:"</span>, data.Country.memory_usage())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Use sparse types for variables with NaNs<br>
<a href="./_resources/Python,_Pandas.resources/image.2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="./_resources/Python,_Pandas.resources/image.2.png" class="img-fluid" width="299"></a></p>
<ul>
<li><span class="ribbon-highlight">Example</span>: <code>data["Rating"] = data.Rating.astype("Sparse[float32]")</code></li>
</ul></li>
<li><p>Specify datatype when loading data</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>col_list <span class="op">=</span> [<span class="st">"Employee_ID"</span>, <span class="st">"First_Name"</span>, <span class="st">"Salary"</span>, <span class="st">"Rating"</span>, <span class="st">"Country_Code"</span>]</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">"dummy_dataset.csv"</span>, usecols<span class="op">=</span>col_list,&nbsp;</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dtype <span class="op">=</span> {<span class="st">"Employee_ID"</span>:np.int32, <span class="st">"Country_Code"</span>:<span class="st">"category"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../qmd/python-pandas-recipes.html" class="pagination-link  aria-label=" pandas,="" recipes"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Pandas, Recipes</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../qmd/python-polars.html" class="pagination-link" aria-label="Polars">
        <span class="nav-page-text">Polars</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../LICENSE.html">
<p>Creative Commons Attribution-NonCommercial 4.0 International License</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"descPosition":"bottom","selector":".lightbox","closeEffect":"zoom","openEffect":"zoom","loop":false});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>